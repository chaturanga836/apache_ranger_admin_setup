"use strict";(self.webpackChunkranger=self.webpackChunkranger||[]).push([[783],{9423:(e,t,n)=>{n.d(t,{A:()=>f});var s=n(6540),a=n(8914),o=n(616),r=n(2431),i=n(1461),l=n(2543),c=["indeterminate","chkType"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},d.apply(this,arguments)}var m=(0,s.forwardRef)(((e,t)=>{var{indeterminate:n,chkType:a}=e,o=function(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},o=Object.keys(e);for(s=0;s<o.length;s++)n=o[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c),r=(0,s.useRef)(),i=t||r;return(0,s.useEffect)((()=>{i.current.indeterminate=n}),[i,n]),s.createElement(s.Fragment,null,s.createElement("input",d({type:"checkbox",ref:i},o,{className:"".concat("header"===a?"tablethcheckbox":"tabletdcheckbox")})))}));const f=function(e){var t,n,c,{columns:p,loading:h,data:f,fetchData:g,showPagination:y=!0,pageCount:v,currentpageIndex:b,currentpageSize:_,rowSelectOp:E,columnHide:C,columnSort:O,clientSideSorting:N,columnResizable:S,totalCount:D,defaultSort:k=[],getRowProps:V=(()=>({}))}=e,{getTableProps:w,getTableBodyProps:T,headerGroups:x,rows:P,prepareRow:F,pageCount:K,gotoPage:R,nextPage:I,previousPage:M,setPageSize:A,canPreviousPage:B,allColumns:L,canNextPage:j,pageOptions:H,state:{pageIndex:W,pageSize:z,sortBy:U},selectedFlatRows:Y}=(0,a.useTable)({columns:p,data:f,initialState:{pageIndex:b||0,pageSize:_||25,sortBy:k||[],hiddenColumns:(c=[],null!=localStorage.getItem("showHideTableCol")&&(c=!(0,l.isEmpty)(localStorage.getItem("showHideTableCol"))&&JSON.parse(localStorage.getItem("showHideTableCol"))),(0,l.isEmpty)(c[null==C?void 0:C.tableName])?[]:null===(t=c[null==C?void 0:C.tableName])||void 0===t||null===(n=t.filter((e=>0==e.renderable)))||void 0===n?void 0:n.map((e=>e.name)))},manualPagination:!0,manualSortBy:!N&&!0,disableSortBy:!O,pageCount:v,autoResetPage:!1},a.useResizeColumns,a.useFlexLayout,a.useSortBy,a.usePagination,a.useRowSelect,(e=>{e.visibleColumns.push((e=>{var t=[];if(E){var n={id:"selection",Header:e=>{var{getToggleAllPageRowsSelectedProps:t}=e;return s.createElement("div",null,s.createElement(m,d({},t(),{chkType:"header"})))},Cell:e=>{var{row:t}=e;return s.createElement("div",{className:"text-center"},s.createElement(m,t.getToggleRowSelectedProps()))},width:40};E&&"first"===E.position?t.push(n,...e):t.push(...e,n)}else t=[...e];return t}))})),G=(0,s.useRef)(),[J,q]=(0,s.useState)("");(0,s.useEffect)((()=>{g({pageIndex:W,pageSize:z,gotoPage:R,sortBy:U})}),[g,W,z,R,!N&&U]),(0,s.useEffect)((()=>{E&&(E.selectedRows.current=Y)}),[Y]),(0,s.useEffect)((()=>{q(W+1)}),[W]);var Q=(0,l.groupBy)(L,"parent[id]");delete Q.undefined;var X=L.map((e=>{var t;return{columnName:null!=e&&e.parent?"Group(".concat(null==e?void 0:e.parent.id,")"):"Non-Group(".concat(null==e?void 0:e.id,")"),columnData:Q[null===(t=e.parent)||void 0===t?void 0:t.id]||e}})),Z=(0,l.uniqBy)(X,(function(e){return e.columnName})),$=[];return s.createElement(s.Fragment,null,(null==C?void 0:C.isVisible)&&s.createElement("div",{className:"position-absolute top-0 end-0"},s.createElement(i.A,{className:"p-0 column-dropdown",align:"end",as:o.A,size:"sm",id:"dropdown-variants-info",variant:"info",title:"Columns"},s.createElement("div",{className:"column-dropdown-maxheight"},s.createElement("ul",{className:"list-group fnt-14"},Z.map(((e,t)=>{var n,a;e.columnName=="Non-Group(".concat(e.columnData.id,")")?$.push({name:e.columnData.id,renderable:e.columnData.isVisible}):e.columnData.forEach((e=>{$.push({name:e.id,renderable:e.isVisible})}));var o=u(u({},JSON.parse(localStorage.getItem("showHideTableCol"))||{}),{},{[C.tableName]:$});return localStorage.setItem("showHideTableCol",JSON.stringify(o)),e.columnName=="Non-Group(".concat(e.columnData.id,")")?s.createElement("li",{className:"column-list text-truncate",key:"col-".concat(t)},s.createElement("label",{title:e.columnData.Header,className:"d-flex align-items-center"},s.createElement("input",d({className:"me-1",type:"checkbox"},e.columnData.getToggleHiddenProps())),e.columnData.Header)):s.createElement("li",{className:"column-list text-truncate",key:"col-".concat(t)},void 0!==e.columnName&&s.createElement("div",{className:"font-weight-bold text-secondary mb-2 fnt-14"},void 0!==e.columnName&&(null==e||null===(n=e.columnData[0])||void 0===n||null===(a=n.parent)||void 0===a?void 0:a.id)),e.columnData.map((e=>s.createElement("ul",{key:e.id,className:"p-0"},s.createElement("li",{className:" list-unstyled"}," ",s.createElement("label",{title:e.Header,className:"d-flex align-items-center"},s.createElement("input",d({className:"me-1",type:"checkbox"},e.getToggleHiddenProps())),e.Header))))))})))))),s.createElement("div",{className:"row"},s.createElement("div",{className:"col-sm-12"},s.createElement("div",{className:"table-responsive"},s.createElement(r.A,d({bordered:!0,hover:!0},w()),s.createElement(s.Fragment,null,s.createElement("thead",{className:"thead-light text-center"},x.map((e=>s.createElement("tr",e.getHeaderGroupProps(),e.headers.map((e=>s.createElement("th",d({},e.getHeaderProps([{className:e.className}]),e.getHeaderProps(e.getSortByToggleProps()),{title:void 0,onClick:()=>O&&e.toggleSortBy&&e.toggleSortBy(!e.isSortedDesc)}),S&&!e.disableResizing&&s.createElement(s.Fragment,null,s.createElement("div",d({className:"fa fa-expand","aria-hidden":"true"},e.getResizerProps([{className:"resizer"}]),{onClick:e=>e.stopPropagation()})),s.createElement("i",d({className:"fa fa-expand resizeable-icon","aria-hidden":"true"},e.getResizerProps()))),e.render("Header"),O&&e.isSorted&&s.createElement("span",null,e.isSortedDesc?" ▼":" ▲")))))))),h?s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,s.createElement("center",null,s.createElement("i",{className:"fa fa-spinner fa-pulse fa-lg fa-fw"}))))):0===P.length&&0==h?s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",{colSpan:p.length+1},s.createElement("center",null,s.createElement("span",{className:"text-muted","data-cy":"tbleDataMsg"},'"No data to show!!"'))))):s.createElement("tbody",T(),P.map((e=>(F(e),s.createElement("tr",d({},e.getRowProps(V(e)),{id:e.original.id}),e.cells.map((e=>s.createElement("td",e.getCellProps(),e.render("Cell")))))))))))),y&&D>25&&s.createElement("div",{className:"row mt-2"},s.createElement("div",{className:"col-md-12 m-b-sm"},s.createElement("div",{className:"text-center d-flex justify-content-end align-items-center pb-2"},s.createElement("span",null,"Records per page",s.createElement("select",{className:"select-pagesize ms-2",value:z,onChange:e=>{R(0),A(Number(e.target.value)),q(1),G.current.value=1}},[25,50,75,100].map((e=>s.createElement("option",{key:e,value:e},e))))),s.createElement("button",{title:"First",onClick:()=>{R(0),G.current.value=1,q(1)},disabled:!B,className:"pagination-btn-last btn btn-outline-dark btn-sm me-1"},s.createElement("i",{className:"fa fa-angle-double-left","aria-hidden":"true"})),s.createElement("button",{title:"Previous",onClick:()=>{G.current.value=W,M(),q(W)},disabled:!B,className:"pagination-btn-previous btn btn-outline-dark btn-sm me-2"},s.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})),"Page"," ",s.createElement("div",{className:"position-relative ms-1"},s.createElement("input",{className:"pagination-input",type:"number",ref:G,key:W+1,defaultValue:W+1,onChange:e=>{setTimeout((()=>{var t=e.target.value;if(q(t),t<1||t>H.length||!Number.isInteger(Number(t)))return t;var n=t?Number(t)-1:0;R(n)}),2e3)}}),""!==J&&(J<1||J>H.length||!Number.isInteger(Number(J)))&&((e,t)=>{var n="";return Number.isInteger(Number(J))?e<1?n="Value must be greater than or equal to 1":e>t.length&&(n="Value must be less than or equal to ".concat(t.length)):n="Please enter a valid value.",s.createElement("span",{className:"text-danger position-absolute text-start pagination-error-field"},n)})(J,H),s.createElement("span",{className:"me-1"}," ")),s.createElement("span",{className:"me-1"},s.createElement("span",{className:"me-1"}," "),"of ",H.length),s.createElement("span",{className:"me-1"}," "),s.createElement("button",{onClick:()=>{G.current.value=W+2,I(),q(W+2)},className:"pagination-btn-previous me-1 btn btn-outline-dark btn-sm lh-1",disabled:!j},s.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})),s.createElement("button",{onClick:()=>{R(K-1),G.current.value=K,q(K)},className:"pagination-btn-last btn btn-outline btn-sm",disabled:!j},s.createElement("i",{className:"fa fa-angle-double-right","aria-hidden":"true"}))))))))}},8281:(e,t,n)=>{n.d(t,{A:()=>j});var s=n(2306),a=n.n(s),o=n(5556),r=n.n(o),i=n(6540),l=n(6942);const c=a()({displayName:"TypeaheadOption",propTypes:{customClasses:r().object,onClick:r().func,children:r().string},getDefaultProps:function(){return{customClasses:{},onClick:function(e){e.preventDefault()}}},getInitialState:function(){return{hover:!1}},render:function(){var e={hover:this.props.hover};e[this.props.customClasses.listItem]=!!this.props.customClasses.listItem;var t=l(e);return i.createElement("li",{className:t,onClick:this._onClick},i.createElement("a",{href:"#",className:this._getClasses(),ref:"anchor"},this.props.children))},_getClasses:function(){var e={"typeahead-option":!0};return e[this.props.customClasses.listAnchor]=!!this.props.customClasses.listAnchor,l(e)},_onClick:function(e){return e.preventDefault(),this.props.onClick()}});var p=window.React||n(6540),u=n(6942);const h=a()({displayName:"TypeaheadSelector",propTypes:{options:r().array,optionsLabel:r().array,header:r().string,customClasses:r().object,selectionIndex:r().number,onOptionSelected:r().func},getDefaultProps:function(){return{selectionIndex:null,customClasses:{},onOptionSelected:function(e){}}},getInitialState:function(){return{selectionIndex:this.props.selectionIndex,selection:this.getSelectionForIndex(this.props.selectionIndex)}},componentWillReceiveProps:function(e){this.setState({selectionIndex:null})},render:function(){var e={"typeahead-selector":!0};e[this.props.customClasses.results]=this.props.customClasses.results;var t=u(e),n=this.props.options.map((function(e,t){return p.createElement(c,{ref:e,key:e,hover:this.state.selectionIndex===t,customClasses:this.props.customClasses,onClick:this._onClick.bind(this,e)},this._getOptionsLabel(e))}),this);return p.createElement("ul",{className:t},n)},_getOptionsLabel:function(e){if("Category"==this.props.header){for(var t=0;t<this.props.fullOptions.length;t++)if(this.props.fullOptions[t].category==e)return this.props.fullOptions[t].label}else if("Value"==this.props.header){var n=this._getCategoryOptions();if(null==n)return[];for(t=0;t<n().length;t++)if(n()[t].value==e)return n()[t].label}return e},_getCategoryOptions:function(){for(var e=0;e<this.props.fullOptions.length;e++)if(this.props.fullOptions[e].category==this.props.currentCategory)return this.props.fullOptions[e].options},setSelectionIndex:function(e){this.setState({selectionIndex:e,selection:this.getSelectionForIndex(e)})},getSelectionForIndex:function(e){return null===e?null:this.props.options[e]},_onClick:function(e){this.props.onOptionSelected(e)},_nav:function(e){if(this.props.options){var t;(t=null===this.state.selectionIndex?1==e?0:e:this.state.selectionIndex+e)<0?t+=this.props.options.length:t>=this.props.options.length&&(t-=this.props.options.length);var n=this.getSelectionForIndex(t);this.setState({selectionIndex:t,selection:n})}},navDown:function(){this._nav(1)},navUp:function(){this._nav(-1)}});var d=d||{};d.DOM_VK_UP=d.DOM_VK_UP||38,d.DOM_VK_DOWN=d.DOM_VK_DOWN||40,d.DOM_VK_BACK_SPACE=d.DOM_VK_BACK_SPACE||8,d.DOM_VK_RETURN=d.DOM_VK_RETURN||13,d.DOM_VK_ENTER=d.DOM_VK_ENTER||14,d.DOM_VK_ESCAPE=d.DOM_VK_ESCAPE||27,d.DOM_VK_TAB=d.DOM_VK_TAB||9;const m=d;var f=n(4751),g=n.n(f),y=n(6779),v=n(961),b=n(5338),_=n(6540),E=_.createRef();const C=a()({displayName:"Popover",componentWillMount:function(){var e=document.createElement("span");e.className="datepicker__container",this._popoverElement=e,document.querySelector("body").appendChild(this._popoverElement)},componentDidMount:function(){this._renderPopover()},_popoverComponent:function(){var e=this.props.className;return _.createElement("div",{className:e},this.props.children)},_tetherOptions:function(){var e=v.findDOMNode(this);return{element:this._popoverElement,target:e.parentElement,attachment:"top left",targetAttachment:"bottom left",targetOffset:"10px 0",optimizations:{moveElement:!1},constraints:[{to:"window",attachment:"together",pin:!0}]}},_renderPopover:function(){E.current=b.createRoot(this._popoverElement),E.current.render(this._popoverComponent()),null!=this._tether?this._tether.setOptions(this._tetherOptions()):this._tether=new y.A(this._tetherOptions())},componentWillUnmount:function(){var e;null===(e=this._tether)||void 0===e||e.destroy(),setTimeout((()=>{var e;null===(e=E.current)||void 0===e||e.unmount()})),this._popoverElement.parentNode&&this._popoverElement.parentNode.removeChild(this._popoverElement)},render:function(){return _.createElement("span",null)}});var O=n(3908),N=n(9052),S=n.n(N),D=n(6540);const k=(0,O.A)(a()({displayName:"Calendar",handleClickOutside:function(){this.props.hideCalendar()},isValidDate:function(e,t,n){var s=null==e?void 0:e.find((e=>"startDate"==e.category)),a=null==e?void 0:e.find((e=>"endDate"==e.category));return void 0===s||void 0===a?void 0!==s&&"endDate"===n?t.isAfter(null==s?void 0:s.value):void 0===a||"startDate"!==n||t.isBefore(null==a?void 0:a.value):"startDate"===n?t.isBefore(null==a?void 0:a.value):"endDate"===n?t.isAfter(null==s?void 0:s.value):void 0},render:function(){return D.createElement(S(),{ref:"datetime",dateFormat:"MM/DD/YYYY",timeFormat:!1,closeOnSelect:!0,input:!1,className:"typehead-token-datetime",value:this.props.value,onChange:this.props.onSelect,isValidDate:e=>this.isValidDate(this.props.allSelected,e,this.props.currentCategory)})}}));var V=n(6540);const w=a()({displayName:"DateInput",propTypes:{onKeyDown:r().func},componentDidMount:function(){this.toggleFocus(this.props.focus)},componentWillReceiveProps:function(e){this.toggleFocus(e.focus)},toggleFocus:function(e){e?this.refs.entry.focus():this.refs.entry.blur()},handleKeyDown:function(e){switch(e.key){case"Enter":e.preventDefault(),this.props.handleEnter(e);break;case"Backspace":this.props.onKeyDown(e)}},handleClick:function(e){this.props.handleClick(e)},render:function(){return V.createElement("input",{ref:"entry",type:"text",readOnly:!0,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onFocus:this.props.onFocus,className:"datepicker__input",placeholder:this.props.placeholderText,defaultValue:this.props.value,style:{width:70}})}});var T=n(6540);const x=a()({displayName:"DatePicker",propTypes:{onChange:r().func,onKeyDown:r().func},getInitialState:function(){return{focus:!0}},handleFocus:function(){this.setState({focus:!0})},hideCalendar:function(){this.setState({focus:!1})},handleSelect:function(e){this.hideCalendar(),this.setSelected(e)},setSelected:function(e){this.props.onChange(e)},onInputClick:function(){this.setState({focus:!0})},calendar:function(){if(this.state.focus)return T.createElement(C,null,T.createElement(k,{onSelect:this.handleSelect,hideCalendar:this.hideCalendar,value:this.props.value,allSelected:this.props.allSelected,currentCategory:this.props.currentCategory}))},render:function(){return T.createElement("div",null,T.createElement(w,{ref:"dateinput",focus:this.state.focus,onFocus:this.handleFocus,onKeyDown:this.props.onKeyDown,handleClick:this.onInputClick,handleEnter:this.hideCalendar,setSelected:this.setSelected,hideCalendar:this.hideCalendar,placeholderText:this.props.placeholderText,value:this.props.value}),this.calendar())}});var P=n(2543),F=window.React||n(6540),K=F.createRef(),R=n(6942);const I=(0,O.A)(a()({displayName:"Typeahead",propTypes:{customClasses:r().object,currentCategory:r().string,maxVisible:r().number,fullOptions:r().array,options:r().array,optionsLabel:r().array,header:r().string,datatype:r().string,defaultValue:r().string,placeholder:r().string,onOptionSelected:r().func,onKeyDown:r().func},getDefaultProps:function(){return{options:[],header:"Category",datatype:"text",customClasses:{},defaultValue:"",placeholder:"",onKeyDown:function(e){},onOptionSelected:function(e){}}},getInitialState:function(){return{options:this.props.options,header:this.props.header,datatype:this.props.datatype,focused:this.props.focus||!1,visible:this.getOptionsForValue(this.props.defaultValue,this.props.options),entryValue:this.props.defaultValue,selection:null}},componentDidMount:function(){var e;this.setState({tokenWidth:null===(e=K.current)||void 0===e?void 0:e.clientWidth,visible:"typehead-edit-view"==this.props.className&&"textoptions"==this.state.datatype?this.state.options:[]}),"typehead-edit-view"==this.props.className&&"date"!==this.state.datatype&&this.refs.entry.focus()},componentWillReceiveProps:function(e){this.setState({options:e.options,header:e.header,datatype:e.datatype,visible:e.options})},getOptionsForValue:function(e,t){var n=g().filter(e,t).map((function(e){return e.string}));return this.props.maxVisible&&(n=n.slice(0,this.props.maxVisible)),n},getOptionsLabelForValue:function(e,t){var n=g().filter(e,this.props.optionsLabel).map((function(e){return e.string}));return n=n.map((e=>{if("Category"==this.props.header)return(0,P.find)(this.props.fullOptions,["label",e]).category;if("Value"==this.props.header&&!(0,P.isEmpty)(this.props.optionsLabel)){var t=(0,P.find)(this.props.fullOptions,["category",this.props.currentCategory]).options();return(0,P.find)(t,["label",e]).value}})),this.props.maxVisible&&(n=n.slice(0,this.props.maxVisible)),n},setEntryText:function(e){null!=this.refs.entry&&(this.refs.entry.value=e),this._onTextEntryUpdated()},_renderIncrementalSearchResults:function(){return this.state.focused?this.state.selection?"":this.state.visible.length?F.createElement(h,{ref:"sel",options:this.state.visible,header:this.state.header,onOptionSelected:this._onOptionSelected,customClasses:this.props.customClasses,optionsLabel:this.props.optionsLabel,fullOptions:this.props.fullOptions,currentCategory:this.props.currentCategory}):"":""},_onOptionSelected:function(e){var t=this.refs.entry;t.focus(),t.value=e,this.setState({visible:this.getOptionsForValue(e,this.state.options),selection:e,entryValue:e}),this.props.onOptionSelected(e)},_onTextEntryUpdated:function(){var e,t="";null!=this.refs.entry&&(t=this.refs.entry.value);var n,s,a=null===(e=K.current)||void 0===e?void 0:e.clientWidth;void 0!==this.refs.input&&this.refs.input.childNodes.length>=2&&(this.refs.input.childNodes[1].innerHTML=t.replace(/ /g," "),a=0==(null===(n=K.current)||void 0===n?void 0:n.clientWidth)?3:null===(s=K.current)||void 0===s?void 0:s.clientWidth),t=(0,P.trim)(t),this.setState({visible:this.getOptionsLabelForValue(t,this.state.options),selection:null,entryValue:t,tokenWidth:a})},_onEnter:function(e){if(!this.refs.sel.state.selection)return this.props.onKeyDown(e);this._onOptionSelected(this.refs.sel.state.selection)},_onEscape:function(){this.refs.sel.setSelectionIndex(null)},_onTab:function(e){var t=this.refs.sel.state.selection?this.refs.sel.state.selection:this.state.visible[0];this._onOptionSelected(t)},eventMap:function(e){var t={};return t[m.DOM_VK_UP]=this.refs.sel.navUp,t[m.DOM_VK_DOWN]=this.refs.sel.navDown,t[m.DOM_VK_RETURN]=t[m.DOM_VK_ENTER]=this._onEnter,t[m.DOM_VK_ESCAPE]=this._onEscape,t[m.DOM_VK_TAB]=this._onTab,t},_onKeyDown:function(e){if(e.keyCode!==m.DOM_VK_RETURN&&e.keyCode!==m.DOM_VK_ENTER||(0===this.props.options.length&&this._onOptionSelected(this.state.entryValue),this.props.options.indexOf(this.state.entryValue)>-1&&this._onOptionSelected(this.state.entryValue)),!this.refs.sel)return this.props.onKeyDown(e);var t=this.eventMap()[e.keyCode];if(!t)return this.props.onKeyDown(e);t(e),e.preventDefault()},_onFocus:function(e){this.setState({focused:!0})},handleClickOutside:function(e){this.setState({focused:!1})},isDescendant:function(e,t){for(var n=t.parentNode;null!=n;){if(n==e)return!0;n=n.parentNode}return!1},_handleDateChange:function(e){this.props.onOptionSelected(e.format("MM/DD/YYYY"))},_showDatePicker:function(){return"date"==this.state.datatype},inputRef:function(){return this._showDatePicker()?this.refs.datepicker.refs.dateinput.refs.entry:this.refs.entry},calculateWidth:function(){return void 0!==this.state.tokenWidth?this.state.tokenWidth:null===(e=K.current)||void 0===e?void 0:e.clientWidth;var e},render:function(){var e={};e[this.props.customClasses.input]=!!this.props.customClasses.input;var t=R(e),n={typeahead:!0};n[this.props.className]=!!this.props.className;var s=R(n);return this._showDatePicker()?F.createElement("span",{ref:"input",className:s,onFocus:this._onFocus},F.createElement(x,{ref:"datepicker",onChange:this._handleDateChange,onKeyDown:this._onKeyDown,value:this.state.entryValue,allSelected:this.props.allSelected,currentCategory:this.props.currentCategory})):F.createElement("div",{ref:"input",className:s,onFocus:this._onFocus},F.createElement("input",{ref:"entry",type:"text",placeholder:this.state.focused?"":this.props.placeholder,className:t,defaultValue:this.state.entryValue,onChange:this._onTextEntryUpdated,onKeyDown:this._onKeyDown,style:{padding:0,marginTop:1,marginLeft:2,width:"typehead-edit-view"===this.props.className&&this.calculateWidth()}}),F.createElement("div",{ref:K,className:"typehead-input-value"},this.state.entryValue.replace(/ /g," ")),this._renderIncrementalSearchResults())}}));var M=n(6540);const A=a()({displayName:"Token",propTypes:{children:r().object,onRemove:r().func,categoryLabel:r().string,selectedCategory:r().string},getInitialState:function(){return{isHovering:!1,isEditView:!1}},handleMouseOver:function(){this.setState({isHovering:!0})},handleMouseOut:function(){this.setState({isHovering:!1})},onValueClick:function(){this.setState({isEditView:!0})},_addTokenForValue:function(e){var t=this.props.allSelected,n=t[this.props.index];e!==n.value?(""===e?t=(0,P.reject)(t,n):n.value=e,this.props.setFiltersValue(t)):this.setState({isEditView:!1})},_onKeyDown:function(e){},render:function(){var{selectedCategory:e,allSelected:t}=this.props;return M.createElement("div",{className:this.state.isEditView?"typeahead-token typeahead-token-is-edit":"typeahead-token"},this._makeCloseButton(),M.createElement("span",{className:"typeahead-token-label ms-3 me-1 text-uppercase fw-bold"},this.props.categoryLabel," :"),this.state.isEditView?M.createElement(I,{ref:"typeaheadValue",className:"typehead-edit-view",placeholder:"",customClasses:{input:"token-edit-view"},currentCategory:e,fullOptions:this.props._getFullOptions,options:this.props._getOptionsForTypeaheadValue(e),optionsLabel:this.props._getValueOptionsLabel(e),header:"Value",datatype:this.props._getInputType(e),defaultValue:this.props.categoryValue,onOptionSelected:this._addTokenForValue,onKeyDown:this._onKeyDown,focus:!0,allSelected:t}):M.createElement("span",{className:"typeahead-token-value",onClick:this.onValueClick},this.props.categoryValue.replace(/ /g," ")))},_makeCloseButton:function(){return this.props.onRemove?M.createElement("a",{className:"typeahead-token-close",href:"#",onClick:function(e){this.props.onRemove(this.props.children),e.preventDefault()}.bind(this)},M.createElement("span",{className:"typeahead-token-icon-close",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut})):""}});var B=n(6540),L=n(6942);const j=a()({displayName:"TypeaheadTokenizer",propTypes:{options:r().array,customClasses:r().object,defaultSelected:r().array,defaultValue:r().string,placeholder:r().string,onChange:r().func},componentWillReceiveProps(e){JSON.stringify(this.props.defaultSelected)!==JSON.stringify(e.defaultSelected)&&this.setState({selected:e.defaultSelected})},getInitialState:function(){return{selected:this.props.defaultSelected,category:""}},getDefaultProps:function(){return{options:[],defaultSelected:[],customClasses:{},defaultValue:"",placeholder:""}},_renderTokens:function(){var e={};e[this.props.customClasses.token]=!!this.props.customClasses.token;var t=L(e);return this.state.selected.map((function(e,n){var s=e.category+e.value+n,a=this._getFilterCategoryLabel(e.category),o=this._getFilterCategoryLabelForOption(e.category,e.value);return(0,P.some)(this.props.options,["category",e.category])&&B.createElement(A,{key:s,className:t,onRemove:this._removeTokenForValue,categoryLabel:a,categoryValue:o,index:n,allSelected:this.state.selected,selectedCategory:e.category,_getOptionsForTypeaheadValue:this._getOptionsForTypeaheadValue,_getValueOptionsLabel:this._getValueOptionsLabel,_getInputType:this._getInputType,_getFullOptions:this._getFullOptions(),setFiltersValue:this.setFiltersValue},e)}),this)},_getFullOptions:function(){return this.props.options},_getOptionsForTypeahead:function(){if(""==this.state.category){var e=[],t=[],n=(0,P.map)((0,P.filter)(this.props.options,["addMultiple",!0]),"category");t=this.state.selected.map((e=>{if(!n.includes(e.category))return e.category})).filter(Boolean);for(var s=0;s<this.props.options.length;s++)-1===t.indexOf(this.props.options[s].category)&&e.push(this.props.options[s].category);return e}var a=this._getCategoryOptions();return null==a?[]:(0,P.map)(a(),"value")},_getOptionsForTypeaheadValue:function(e){var t=this._getOptionsByCategory(e);return null==t?[]:(0,P.map)(t(),"value")},_getHeader:function(){return""==this.state.category?"Category":"Value"},_getCategoryType:function(e){for(var t=0;t<this.props.options.length;t++)if(this.props.options[t].category==e)return this.props.options[t].type},_getCategoryOptions:function(){for(var e=0;e<this.props.options.length;e++)if(this.props.options[e].category==this.state.category)return this.props.options[e].options},_getOptionsByCategory:function(e){for(var t=0;t<this.props.options.length;t++)if(this.props.options[t].category==e)return this.props.options[t].options},_onKeyDown:function(e){if(e.keyCode===m.DOM_VK_BACK_SPACE){var t=this.refs.typeahead.instanceRef.inputRef();if(t.selectionStart==t.selectionEnd&&0==t.selectionStart){if(""!=this.state.category)this.setState({category:""});else{if(!this.state.selected.length)return;this._removeTokenForValue(this.state.selected[this.state.selected.length-1])}e.preventDefault()}}},_removeTokenForValue:function(e){var t=this.state.selected.indexOf(e);-1!=t&&(this.state.selected.splice(t,1),this.setState({selected:this.state.selected}),this.props.onChange(this.state.selected))},_addTokenForValue:function(e){if(""==this.state.category)return this.setState({category:e}),void this.refs.typeahead.instanceRef.setEntryText("");""!==e&&(e={category:this.state.category,value:(0,P.trim)(e)},this.state.selected.push(e),this.setState({selected:this.state.selected})),this.refs.typeahead.instanceRef.setEntryText(""),this.props.onChange(this.state.selected),this.setState({category:""})},_getInputType:function(e){var t=e||this.state.category;return""!=t?this._getCategoryType(t):"text"},_getOptionsLabel:function(){var e=this._getHeader(),t=[],n=[],s=(0,P.map)((0,P.filter)(this.props.options,["addMultiple",!0]),"category");if(n=this.state.selected.map((e=>{if(!s.includes(e.category))return e.category})).filter(Boolean),"Category"==e)for(var a=0;a<this.props.options.length;a++)-1===n.indexOf(this.props.options[a].category)&&t.push(this.props.options[a].label);else if("Value"==e){var o=this._getCategoryOptions();return null==o?[]:(0,P.map)(o(),"label")}return t},_getValueOptionsLabel:function(e){var t=this._getOptionsByCategory(e);return null==t?[]:(0,P.map)(t(),"label")},_getFilterCategoryLabel:function(e){for(var t=0;t<this.props.options.length;t++)if(this.props.options[t].category==e)return this.props.options[t].label;return e},_getFilterCategoryLabelForOption:function(e,t){for(var n=0;n<this.props.options.length;n++)if(this.props.options[n].category==e&&void 0!==this.props.options[n].options&&this.props.options[n].options().length>0){var s=(0,P.find)(this.props.options[n].options(),{value:t});return void 0!==s?s.label:t}return t},setFiltersValue:function(e){this.setState({selected:e}),this.props.onChange(e)},_onClearAll:function(){var e=[];this.setState({selected:e,category:""}),this.props.onChange(e)},_getClearAllButton:function(){return B.createElement("span",{className:"token-clear-all"},B.createElement("a",{className:"typeahead-token-close",href:"#",onClick:function(e){this._onClearAll(),e.preventDefault()}.bind(this)},B.createElement("span",{className:"typeahead-token-icon-close",onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut})))},render:function(){var e={};e[this.props.customClasses.typeahead]=!!this.props.customClasses.typeahead;var t=L(e);return B.createElement("div",{className:"filter-tokenizer"},B.createElement("span",{className:"input-group-addon"},B.createElement("i",{className:"fa fa-search"})),B.createElement("div",{className:"token-collection"},this._renderTokens(),B.createElement("div",{className:"filter-input-group"},B.createElement("div",{className:"filter-category text-uppercase"},this._getFilterCategoryLabel(this.state.category)),B.createElement(I,{ref:"typeahead",className:t,placeholder:0===this.state.selected.length&&""===this.state.category?this.props.placeholder:"",customClasses:this.props.customClasses,currentCategory:this.state.category,fullOptions:this.props.options,options:this._getOptionsForTypeahead(),optionsLabel:this._getOptionsLabel(),header:this._getHeader(),datatype:this._getInputType(),defaultValue:this.props.defaultValue,onOptionSelected:this._addTokenForValue,onKeyDown:this._onKeyDown,allSelected:this.state.selected}))),this._getClearAllButton())}})}}]);