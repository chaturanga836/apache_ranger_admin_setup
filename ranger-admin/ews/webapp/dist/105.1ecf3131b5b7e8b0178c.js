"use strict";(self.webpackChunkranger=self.webpackChunkranger||[]).push([[105],{1659:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(6540),a=r(8106);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],{navigator:r}=(0,n.useContext)(a.jb);(0,n.useEffect)((()=>{if(t){var n=r.block((t=>{var r=l(l({},t),{},{retry(){n(),setTimeout((()=>{t.retry()}),0)}});e(r)}));return n}}),[r,e,t])}((0,n.useCallback)((t=>{window.confirm(e)&&t.retry()}),[e]),t)}},2885:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(6540),a=r(8106);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}const l=e=>t=>{var r=(0,a.zy)(),l=(0,a.Zp)(),c=(0,a.g)();return n.createElement(e,i({navigate:l,location:r,params:c},t))}},105:(e,t,r)=>{r.r(t),r.d(t,{default:()=>P});var n=r(6540),a=r(4479),i=r(1105),l=r(2431),c=r(5615),o=r(952),s=r(6474),u=r(3088),f=r(924),d=r(3267),m=r(5787),v=r(3666),p=r(2543),b=r(2885),h=r(8106),y=r(1659),E=r(4283);function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function A(e,t,r,n,a,i,l){try{var c=e[i](l),o=c.value}catch(e){return void r(e)}c.done?t(o):Promise.resolve(o).then(n,a)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function l(e){A(i,n,a,l,c,"next",e)}function c(e){A(i,n,a,l,c,"throw",e)}l(void 0)}))}}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k={service:{},definition:{},loader:!0},x=(e,t)=>{switch(t.type){case"SET_LOADER":return w(w({},e),{},{loader:t.loader});case"SET_DATA":return w(w({},e),{},{service:t.service,definition:t.definition,loader:t.loader});default:throw new Error}},D=e=>{var{isDirtyField:t,isUnblock:r}=e;return(0,y.A)("Are you sure you want to leave",t&&!r),null};const P=(0,b.A)((function(e){var[t,r]=(0,n.useReducer)(x,k),{loader:b,service:y,definition:A}=t,{state:N}=(0,h.zy)(),j=(0,h.Zp)(),[P,S]=(0,n.useState)(!1),[V,R]=(0,n.useState)(!1),$=(0,n.useRef)(null),{allServiceDefs:C}=(0,p.cloneDeep)((0,E.Ji)());(0,n.useEffect)((()=>{F()}),[]);var z,F=function(){var e=O((function*(){yield K()}));return function(){return e.apply(this,arguments)}}(),q=function(){var t=O((function*(t){var r={};if((null==t?void 0:t.attributes.length)>0)for(var n of Object.keys(t.attributes)){var a,i;if(!(0,p.isEmpty)(null==t||null===(a=t.attributes[n])||void 0===a?void 0:a.name)||!(0,p.isEmpty)(null==t||null===(i=t.attributes[n])||void 0===i?void 0:i.value)){var l,c,o,u;if(s.oR.dismiss($.current),(0,p.isEmpty)(null==t||null===(l=t.attributes[n])||void 0===l?void 0:l.name))return void s.oR.error("Please enter Name for ".concat(null==t||null===(o=t.attributes[n])||void 0===o?void 0:o.value));if((0,p.isEmpty)(null==t||null===(c=t.attributes[n])||void 0===c?void 0:c.value))return void s.oR.error("Please enter Value for ".concat(null==t||null===(u=t.attributes[n])||void 0===u?void 0:u.name))}}for(var f of(r.name=t.name,r.cipher=t.cipher,r.length=t.length,r.description=t.description,r.attributes={},Object.keys(t.attributes))){var m,b;(0,p.isEmpty)(null==t||null===(m=t.attributes[f])||void 0===m?void 0:m.name)||(0,p.isEmpty)(null==t||null===(b=t.attributes[f])||void 0===b?void 0:b.value)||(r.attributes[t.attributes[f].name]=t.attributes[f].value)}S(!0);try{R(!0),yield(0,d.fetchApi)({url:"keys/key",method:"post",params:{provider:e.params.serviceName},data:r}),R(!1),s.oR.success("Success! Key created successfully"),j("/kms/keys/edit/manage/".concat(N.detail),{state:{detail:N.detail}})}catch(e){R(!1),(0,v.ig)(e),console.error("Error occurred while creating key! ".concat(e))}}));return function(e){return t.apply(this,arguments)}}(),K=function(){var t=O((function*(){var t;r({type:"SET_LOADER",loader:!0});try{t=yield(0,d.fetchApi)({url:"plugins/services/name/".concat(e.params.serviceName)})}catch(e){console.error("Error occurred while fetching Services! ".concat(e))}r({type:"SET_DATA",service:t,definition:(0,p.find)(C,{name:"kms"}),loader:!1})}));return function(){return t.apply(this,arguments)}}();return b?n.createElement(m.aH,null):n.createElement("div",null,n.createElement("div",{className:"header-wraper"},n.createElement("h3",{className:"wrap-header bold"},"Key Detail"),((z={}).serviceDefId=A&&(null==A?void 0:A.id),z.serviceId=y.data&&y.data.id,z.serviceName=e.params.serviceName,(0,v.zH)(["Kms","KmsKeyForService","KmsKeyCreate"],z))),n.createElement(o.lV,{onSubmit:q,keepDirtyOnReinitialize:!0,mutators:w({},f.A),validate:e=>{var t={};return e.name||(t.name={required:!0,text:"Required"}),t},initialValues:{attributes:[{name:"",value:""}],cipher:"AES/CTR/NoPadding",length:"128"},render:t=>{var{handleSubmit:r,form:s,submitting:f,invalid:d,errors:v,dirty:b,form:{mutators:{push:h}}}=t;return n.createElement("div",{className:"wrap"},n.createElement(D,{isDirtyField:b,isUnblock:P}),n.createElement("form",{onSubmit:e=>{r(e)}},n.createElement(o.D0,{name:"name"},(e=>{var{input:t,meta:r}=e;return n.createElement(a.A,{className:"form-group"},n.createElement(i.A,{xs:3},n.createElement("label",{className:"form-label float-end"},"Key Name *")),n.createElement(i.A,{xs:4},n.createElement("input",g({},t,{name:"name",type:"text",id:r.error&&r.touched?"isError":"name",className:r.error&&r.touched?"form-control border-danger":"form-control","data-cy":"name"})),r.error&&r.touched&&n.createElement("span",{className:"invalid-field"},r.error.text)))})),n.createElement(o.D0,{name:"cipher"},(e=>{var{input:t}=e;return n.createElement(a.A,{className:"form-group"},n.createElement(i.A,{xs:3},n.createElement("label",{className:"form-label float-end"},"Cipher")),n.createElement(i.A,{xs:4},n.createElement("input",g({},t,{name:"cipher",type:"text",className:"form-control","data-cy":"cipher"}))))})),n.createElement(o.D0,{name:"length"},(e=>{var{input:t}=e;return n.createElement(a.A,{className:"form-group"},n.createElement(i.A,{xs:3},n.createElement("label",{className:"form-label float-end"},"Length")),n.createElement(i.A,{xs:4},n.createElement("input",g({},t,{name:"length",type:"number",className:"form-control","data-cy":"length"}))))})),n.createElement(o.D0,{name:"description"},(e=>{var{input:t}=e;return n.createElement(a.A,{className:"form-group"},n.createElement(i.A,{xs:3},n.createElement("label",{className:"form-label float-end"},"Description")),n.createElement(i.A,{xs:4},n.createElement("textarea",g({},t,{className:"form-control","data-cy":"description"}))))})),n.createElement(a.A,{className:"form-group"},n.createElement(i.A,{xs:3},n.createElement("label",{className:"form-label float-end"},"Attributes")),n.createElement(i.A,{xs:6},n.createElement(l.A,{bordered:!0,size:"sm",className:"no-bg-color w-75"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"text-center"},"Name"),n.createElement("th",{className:"text-center",colSpan:"2"},"Value"))),n.createElement("tbody",null,n.createElement(u.ED,{name:"attributes"},(e=>{var{fields:t}=e;return t.map(((e,r)=>n.createElement("tr",{key:e},n.createElement("td",{className:"text-center"},n.createElement(o.D0,{name:"".concat(e,".name"),component:"input",className:"form-control"})),n.createElement("td",{className:"text-center"},n.createElement(o.D0,{name:"".concat(e,".value"),component:"input",className:"form-control"})),n.createElement("td",{className:"text-center"},n.createElement(c.A,{variant:"danger",size:"sm",title:"Yes",onClick:()=>t.remove(r),"data-action":"delete","data-cy":"delete"},n.createElement("i",{className:"fa-fw fa fa-remove"}))))))})))))),n.createElement(a.A,{className:"form-group"},n.createElement(i.A,{xs:3},n.createElement("label",{className:"form-label float-end"})),n.createElement(i.A,{xs:6},n.createElement(c.A,{variant:"outline-secondary",size:"sm",onClick:()=>h("attributes"),"data-action":"addGroup","data-cy":"addGroup"},n.createElement("i",{className:"fa-fw fa fa-plus"})))),n.createElement(a.A,{className:"form-actions"},n.createElement(i.A,{sm:{span:9,offset:3}},n.createElement(c.A,{variant:"primary",onClick:()=>{if(d){var e=document.getElementById("isError")||document.querySelector("input[name=".concat(Object.keys(v)[0],"]"));(0,m.Nc)(e)}r(p.values)},size:"sm",disabled:f,"data-id":"save","data-cy":"save"},"Save"),n.createElement(c.A,{variant:"secondary",type:"button",size:"sm",onClick:()=>{s.reset,S(!0),j("/kms/keys/edit/manage/".concat(e.params.serviceName))},disabled:f,"data-id":"cancel","data-cy":"cancel"},"Cancel")))))}}),n.createElement(m.Yh,{isUiBlock:V}))}))},924:(e,t,r)=>{function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function a(e,t,r,a){void 0===a&&(a=e),delete e.fields[t.name],e.fields[r]=n({},t,{name:r,change:a.fields[r]&&a.fields[r].change,blur:a.fields[r]&&a.fields[r].blur,focus:a.fields[r]&&a.fields[r].focus,lastFieldState:void 0}),e.fields[r].change||delete e.fields[r].change,e.fields[r].blur||delete e.fields[r].blur,e.fields[r].focus||delete e.fields[r].focus}r.d(t,{A:()=>u});var i=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},l=function(e,t,r){var l=e[0],c=e[1],o=e[2],s=r.changeValue;r.resetFieldState,s(t,l,(function(e){var t=[].concat(e||[]);return t.splice(c,0,o),t}));var u=n({},t.fields),f=new RegExp("^"+i(l)+"\\[(\\d+)\\](.*)");Object.keys(t.fields).sort().reverse().forEach((function(e){var r=f.exec(e);if(r){var n=Number(r[1]);if(n>=c){var i=l+"["+(n+1)+"]"+r[2];a(t,u[e],i)}}}))};function c(e,t,r,n){Object.keys(n.fields).forEach((function(i){if(i.substring(0,t.length)===t){var l=i.substring(t.length),c=e+"["+r+"]"+l;a(n,n.fields[i],c)}}))}function o(e,t){Object.keys(e.fields).forEach((function(r){e.fields[r]=n({},e.fields[r],{change:e.fields[r].change||t.fields[r]&&t.fields[r].change,blur:e.fields[r].blur||t.fields[r]&&t.fields[r].blur,focus:e.fields[r].focus||t.fields[r]&&t.fields[r].focus}),e.fields[r].change||delete e.fields[r].change,e.fields[r].blur||delete e.fields[r].blur,e.fields[r].focus||delete e.fields[r].focus}))}var s=function(e,t,r){var l,c=e[0],o=e[1],s=r.changeValue,u=r.renameField;s(t,c,(function(e){var t=[].concat(e||[]);return l=t[o],t.splice(o,1),t}));var f=new RegExp("^"+i(c)+"\\[(\\d+)\\](.*)"),d=n({},t,{fields:n({},t.fields)});return Object.keys(t.fields).forEach((function(e){var r=f.exec(e);if(r){var n=Number(r[1]);if(n===o)delete t.fields[e];else if(n>o){delete t.fields[e];var i=c+"["+(n-1)+"]"+r[2];d.fields[i]?a(t,d.fields[e],i,d):u(t,e,i)}}})),l};const u={insert:l,concat:function(e,t,r){var n=e[0],a=e[1];(0,r.changeValue)(t,n,(function(e){return e?[].concat(e,a):a}))},move:function(e,t,r){var a=e[0],i=e[1],l=e[2],s=r.changeValue;if(i!==l){s(t,a,(function(e){var t=[].concat(e||[]),r=t[i];return t.splice(i,1),t.splice(l,0,r),t}));var u=n({},t,{fields:n({},t.fields)});if(c(a,a+"["+i+"]","tmp",t),i<l)for(var f=i+1;f<=l;f++)c(a,a+"["+f+"]",""+(f-1),t);else for(var d=i-1;d>=l;d--)c(a,a+"["+d+"]",""+(d+1),t);c(a,a+"[tmp]",l,t),o(t,u)}},pop:function(e,t,r){var n,a,l=e[0];if((0,r.changeValue)(t,l,(function(e){if(e)return e.length?(a=e.length-1,n=e[a],e.slice(0,a)):[]})),void 0!==a){var c=new RegExp("^"+i(l)+"\\["+a+"].*");Object.keys(t.fields).forEach((function(e){c.test(e)&&delete t.fields[e]}))}return n},push:function(e,t,r){var n=e[0],a=e[1];(0,r.changeValue)(t,n,(function(e){return e?[].concat(e,[a]):[a]}))},remove:s,removeBatch:function(e,t,r){var l=e[0],c=e[1],o=r.changeValue,s=[].concat(c);s.sort();for(var u=0;u<s.length;u++)u>0&&s[u]===s[u-1]&&s.splice(u--,1);var f=[];o(t,l,(function(e){if(f=c.map((function(t){return e&&e[t]})),!e||!s.length)return e;var t=[].concat(e),r=[];return s.forEach((function(n){t.splice(n-r.length,1),r.push(e&&e[n])})),t}));var d=new RegExp("^"+i(l)+"\\[(\\d+)\\](.*)"),m=n({},t,{fields:{}});return Object.keys(t.fields).forEach((function(e){var r,n=d.exec(e);if(n){var i=Number(n[1]);if(!~s.indexOf(i)){var c=l+"["+(i-(r=i,s.reduce((function(e,t){return t<r?e+1:e}),0)))+"]"+n[2];a(m,t.fields[e],c,t)}}else m.fields[e]=t.fields[e]})),t.fields=m.fields,f},shift:function(e,t,r){var n=e[0];return s([n,0],t,r)},swap:function(e,t,r){var a=e[0],i=e[1],l=e[2],s=r.changeValue;if(i!==l){s(t,a,(function(e){var t=[].concat(e||[]),r=t[i];return t[i]=t[l],t[l]=r,t}));var u=n({},t,{fields:n({},t.fields)}),f=a+"["+l+"]",d=a+"[tmp]";c(a,a+"["+i+"]","tmp",t),c(a,f,i,t),c(a,d,l,t),o(t,u)}},unshift:function(e,t,r){var n=e[0],a=e[1];return l([n,0,a],t,r)},update:function(e,t,r){var n=e[0],a=e[1],i=e[2];(0,r.changeValue)(t,n,(function(e){var t=[].concat(e||[]);return t.splice(a,1,i),t}))}}},2431:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(6942),a=r.n(n),i=r(6540),l=r(6519),c=r(4848);const o=i.forwardRef((({bsPrefix:e,className:t,striped:r,bordered:n,borderless:i,hover:o,size:s,variant:u,responsive:f,...d},m)=>{const v=(0,l.oU)(e,"table"),p=a()(t,v,u&&`${v}-${u}`,s&&`${v}-${s}`,r&&`${v}-${"string"==typeof r?`striped-${r}`:"striped"}`,n&&`${v}-bordered`,i&&`${v}-borderless`,o&&`${v}-hover`),b=(0,c.jsx)("table",{...d,className:p,ref:m});if(f){let e=`${v}-responsive`;return"string"==typeof f&&(e=`${e}-${f}`),(0,c.jsx)("div",{className:e,children:b})}return b}))},3088:(e,t,r)=>{r.d(t,{ED:()=>p});var n=r(8168),a=r(8587),i=r(7356),l=r(952),c=r(6540),o=["render","children","component"],s=function(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&!e.some((function(e,r){return e!==t[r]}))},u=["length"],f=["meta","input"],d=i.iF.reduce((function(e,t){return e[t]=!0,e}),{}),m=["name","subscription","defaultValue","initialValue","isEqual","validate"],v={"final-form":i.rE,"react-final-form":l.rE,"react-final-form-arrays":"3.1.3"},p=function(e){var t=e.name,r=e.subscription,p=e.defaultValue,b=e.initialValue,h=e.isEqual,y=e.validate,E=(0,a.A)(e,m),g=function(e,t){var r=void 0===t?{}:t,o=r.subscription,m=void 0===o?d:o,v=r.defaultValue,p=r.initialValue,b=r.isEqual,h=void 0===b?s:b,y=r.validate,E=(0,l.mN)("useFieldArray").mutators;if(!(E&&E.push&&E.pop))throw new Error("Array mutators not found. You need to provide the mutators from final-form-arrays to your form");var g,A,O=(0,c.useMemo)((function(){return Object.keys(E).reduce((function(t,r){return t[r]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return E[r].apply(E,[e].concat(n))},t}),{})}),[e,E]),N=(g=function(){return function(e,t,r){if(y){var n=y(e,t,r);if(!n||Array.isArray(n))return n;var a=[];return a[i.bS]=n,a}}},(A=c.useRef()).current||(A.current=g()),A.current),w=(0,l.Mt)(e,{subscription:(0,n.A)({},m,{length:!0}),defaultValue:v,initialValue:p,isEqual:h,validate:N,format:function(e){return e}}),j=w.meta,k=j.length,x=(0,a.A)(j,u),D=w.input,P=(0,a.A)(w,f);return{fields:(0,n.A)({name:e,forEach:function(t){for(var r=k||0,n=0;n<r;n++)t(e+"["+n+"]",n)},length:k||0,map:function(t){for(var r=k||0,n=[],a=0;a<r;a++)n.push(t(e+"["+a+"]",a));return n}},O,P,{value:D.value}),meta:x}}(t,{subscription:r,defaultValue:p,initialValue:b,isEqual:h,validate:y}),A=g.fields,O=g.meta;return function(e,t){var r=e.render,i=e.children,l=e.component,s=(0,a.A)(e,o);if(l)return c.createElement(l,(0,n.A)({},s,{children:i,render:r}));if(r)return r(void 0===i?s:(0,n.A)({},s,{children:i}));if("function"!=typeof i)throw new Error("Must specify either a render prop, a render function as children, or a component prop to "+t);return i(s)}((0,n.A)({fields:A,meta:(0,n.A)({},O,{__versions:v})},E),"FieldArray("+t+")")}}}]);