(self.webpackChunkranger=self.webpackChunkranger||[]).push([[849],{8725:(e,t,a)=>{"use strict";a.d(t,{l:()=>c});var r=a(6540),l=a(2431),s=a(1376),n=a(9828);function c(e){return 0==Object.keys(e.syncDetails).length?r.createElement(r.Fragment,null,r.createElement(l.A,{bordered:!0,size:"sm"},r.createElement("thead",{className:"thead-light"},r.createElement("tr",null,r.createElement("th",{className:" text-center"},"Name"),r.createElement("th",{className:" text-center"},"Value"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:"text-center text-muted",colSpan:"2"},"No Sync Details Found!!"))))):r.createElement(r.Fragment,null,r.createElement(l.A,{bordered:!0,size:"sm"},r.createElement("thead",{className:"thead-light"},r.createElement("tr",null,r.createElement("th",{className:" text-center"},"Name"),r.createElement("th",{className:" text-center"},"Value"))),r.createElement("tbody",null,Object.entries(e.syncDetails).map((e=>{var[t,a]=e;return r.createElement("tr",{key:t},r.createElement("td",null,s.im[t]?s.im[t]:t),r.createElement("td",null,a?"syncTime"==t||"lastModified"==t?(0,n.Ay)(a,"mm/dd/yyyy hh:MM:ss TT"):a:"--"))})))))}},9988:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var r=a(6540),l=a(6052),s=a(4479),n=a(1105),c=a(5615),i=a(1461),o=a(4062),u=a(2465),d=a(4743),m=a.n(d),y=a(9423),g=a(1376),E=a(5787),v=a(8106),p=a(8651),b=a(5373),f=a.n(b),h=a(3267),S=a(6474),A=a(8725),w=a(3666),N=a(2543),D=a(8281);function x(e,t,a,r,l,s,n){try{var c=e[s](n),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(r,l)}function P(e){return function(){var t=this,a=arguments;return new Promise((function(r,l){var s=e.apply(t,a);function n(e){x(s,r,l,n,c,"next",e)}function c(e){x(s,r,l,n,c,"throw",e)}n(void 0)}))}}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){L(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const R=function(){var e=(0,v.Zp)(),{state:t}=(0,v.zy)(),[a,d]=(0,r.useState)(!0),[b,x]=(0,r.useState)([]),O=(0,r.useRef)(0),L=(0,r.useRef)([]),R=(0,r.useRef)(null),[k,C]=(0,r.useState)(!1),[z,I]=(0,r.useState)({syncDteails:{},showSyncDetails:!1}),[H,V]=(0,r.useState)(m().now()),[T,_]=(0,r.useState)(0),[j,F]=(0,r.useState)(t&&t.showLastPage?t.addPageData.totalPage:0),[M,K]=(0,r.useState)(t&&t.showLastPage?t.addPageData.totalPage-1:0),[B,Y]=(0,r.useState)(t&&t.showLastPage?t.addPageData.pageSize:25),[G,J]=(0,r.useState)({page:0}),[W,X]=(0,r.useState)({totalPage:0,pageRecords:0,pageSize:0}),[Z,q]=(0,r.useState)([]),[Q,$]=(0,p.ok)(),[ee,te]=(0,r.useState)([]),ae=(0,w.Xm)()||(0,w.EH)(),[re,le]=(0,r.useState)(!0),[se,ne]=(0,r.useState)(!1);(0,r.useEffect)((()=>{var e={},a=[],r=Object.fromEntries([...Q]);for(var l in r){var s=(0,N.find)(ge,{urlLabel:l});if(!(0,N.isUndefined)(s)){var n=s.category,c=r[l];if("textoptions"==s.type){var i=(0,N.find)(s.options(),{label:c});c=void 0!==i?i.value:c}e[n]=c,a.push({category:n,value:c})}}$(U(U({},r),{}),{replace:!0}),JSON.stringify(Z)!==JSON.stringify(e)&&q(e),te(a),le(!1),localStorage.setItem("newDataAdded",t&&t.showLastPage)}),[Q]),(0,r.useEffect)((()=>{"true"==localStorage.getItem("newDataAdded")&&(0,E.r7)(b)}),[T]);var ce=(0,r.useCallback)(function(){var e=P((function*(e){var{pageSize:a,pageIndex:r,gotoPage:l}=e;d(!0);var s=[],n=[],c=0,i=t&&t.showLastPage?t.addPageData.totalPage-1:r,o=0,u=++O.current,m=U({},Z),y=(0,w.Wr)().map((e=>e.value));if(u===O.current){m.page=i,m.startIndex=t&&t.showLastPage?(t.addPageData.totalPage-1)*a:i*a,m.pageSize=a,m.userRoleList=y;try{n=yield(0,h.fetchApi)({url:"xusers/users",params:m,paramsSerializer:function(e){return f().stringify(e,{arrayFormat:"repeat"})}}),s=n.data.vXUsers,c=n.data.totalCount,o=Math.ceil(c/a)}catch(e){(0,w.ig)(e),console.error("Error occurred while fetching User list! ".concat(e))}t&&(t.showLastPage=!1),x(s),X({totalPage:o,pageRecords:n&&n.data&&n.data.totalCount,pageSize:a}),_(c),F(o),K(i),Y(a),J({page:l}),d(!1)}}));return function(t){return e.apply(this,arguments)}}(),[H,Z]),ie=function(){var e=P((function*(e){if(L.current.length>0){var t=L.current,a={};for(var{original:r}of t)r.isVisible!=e&&(a[r.id]=e);if((0,N.isEmpty)(a))return S.oR.dismiss(R.current),void(R.current=S.oR.warning(e==g.zE.STATUS_VISIBLE.value?"Selected ".concat(1===L.current.length?"User is":"Users are"," already visible"):"Selected ".concat(1===L.current.length?"User is ":"Users are"," already hidden")));try{yield(0,h.fetchApi)({url:"xusers/secure/users/visibility",method:"PUT",data:a}),S.oR.dismiss(R.current),R.current=S.oR.success("Sucessfully updated ".concat(1===L.current.length?"User":"Users"," visibility!!")),V(m().now())}catch(e){(0,w.ig)(e),console.error("Error occurred during set User visibility! ".concat(e))}}else S.oR.dismiss(R.current),R.current=S.oR.warning("Please select atleast one user!!")}));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=P((function*(){var e=L.current,t="";if(e.length>0){for(var{original:a}of(de(),e))try{ne(!0),yield(0,h.fetchApi)({url:"xusers/secure/users/id/".concat(a.id),method:"DELETE",params:{forceDelete:!0}}),ne(!1)}catch(e){var r,l;ne(!1),null!=e&&null!==(r=e.response)&&void 0!==r&&null!==(l=r.data)&&void 0!==l&&l.msgDesc?t+=e.response.data.msgDesc+"\n":t+="Error occurred during deleting Users: ".concat(a.name)+"\n",console.error(t)}t?(S.oR.dismiss(R.current),R.current=S.oR.error(t)):(S.oR.dismiss(R.current),R.current=S.oR.success("User deleted successfully!"),(1==b.length||b.length==L.current.length)&&M>0?"function"==typeof(null==G?void 0:G.page)&&G.page(0):V(m().now()))}}));return function(){return e.apply(this,arguments)}}(),ue=r.useMemo((()=>[{Header:"User Name",accessor:"name",Cell:e=>e.value?r.createElement(p.N_,{style:{maxWidth:"100%",display:"inline-block"},className:"text-truncate ".concat((0,w.Dl)()||(0,w.EH)()?"disabled-link text-secondary":"text-info"),title:e.value,to:"/user/"+e.row.original.id},e.value):"--"},{Header:"Email Address",accessor:"emailAddress",Cell:e=>e.value?r.createElement("div",{style:{maxWidth:"100%",display:"inline-block"},className:"text-truncate",title:e.value},e.value):r.createElement("div",{className:"text-center"},"--")},{Header:"Role",accessor:"userRoleList",Cell:e=>{if(e.value&&e.value.length>0){var t=e.value[0];return r.createElement("h6",{className:"text-center"},r.createElement(l.A,{bg:"info"},g.fo[t].label," "))}return r.createElement("div",{className:"textt-center"},"--")},width:70},{Header:"User Source",accessor:"userSource",Cell:e=>{if(null!=(null==e?void 0:e.value)){var t=(0,N.find)(g.zO,{value:e.value});return r.createElement("h6",{className:"text-center"},r.createElement(l.A,{bg:t.variant},t.label))}return"--"},width:70},{Header:"Sync Source",accessor:"syncSource",Cell:e=>e.value?r.createElement("h6",{className:"text-center"},r.createElement(l.A,{bg:"success"},e.value," ")):r.createElement("div",{className:"text-center"},"--"),width:100},{Header:"Groups",accessor:"groupNameList",Cell:e=>void 0!==e.row.values.groupNameList?r.createElement("div",{className:"overflow-auto"},(0,N.isEmpty)(e.row.values.groupNameList)?r.createElement("div",{className:"text-center"},"--"):r.createElement("h6",null,r.createElement(E.LH,{data:e.row.values.groupNameList,key:e.row.original.id}))):"--"},{Header:"Visibility",accessor:"isVisible",Cell:e=>e?e.value==g.zE.STATUS_VISIBLE.value?r.createElement("h6",{className:"text-center"},r.createElement(l.A,{bg:"success"},g.zE.STATUS_VISIBLE.label)):r.createElement("h6",{className:"text-center"},r.createElement(l.A,{bg:"info"},g.zE.STATUS_HIDDEN.label)):r.createElement("div",{className:"text-center"},"--"),width:70},{Header:"Sync Details",accessor:"otherAttributes",Cell:(e,t)=>e.value?r.createElement("div",{className:"text-center"},r.createElement("button",{className:"btn btn-outline-dark btn-sm ","data-id":"syncDetailes","data-cy":"syncDetailes","data-for":"users",title:"Sync Details",id:t.id,onClick:()=>{me(e.value)}},r.createElement("i",{className:"fa-fw fa fa-eye"}," "))):r.createElement("div",{className:"text-center"},"--"),width:80}]),[]),de=()=>{C((e=>!e))},me=e=>{I({syncDteails:!(0,N.isEmpty)(e)&&JSON.parse(e),showSyncDetails:!0})},ye=()=>{I({syncDteails:{},showSyncDetails:!1})},ge=[{category:"emailAddress",label:"Email Address",urlLabel:"emailAddress",type:"text"},{category:"userRole",label:"Role",urlLabel:"role",type:"textoptions",options:()=>ae?[{value:"ROLE_USER",label:"User"},{value:"ROLE_KEY_ADMIN",label:"KeyAdmin"},{value:"ROLE_KEY_ADMIN_AUDITOR",label:"KMSAuditor"}]:[{value:"ROLE_USER",label:"User"},{value:"ROLE_SYS_ADMIN",label:"Admin"},{value:"ROLE_ADMIN_AUDITOR",label:"Auditor"}]},{category:"syncSource",label:"Sync Source",urlLabel:"syncSource",type:"textoptions",options:()=>[{value:"File",label:"File"},{value:"LDAP/AD",label:"LDAP/AD"},{value:"Unix",label:"Unix"}]},{category:"name",label:"User Name",urlLabel:"userName",type:"text"},{category:"userSource",label:"User Source",urlLabel:"userSource",type:"textoptions",options:()=>[{value:"0",label:"Internal"},{value:"1",label:"External"},{value:"6",label:"Federated"}]},{category:"status",label:"User Status",urlLabel:"userStatus",type:"textoptions",options:()=>[{value:"0",label:"Disabled"},{value:"1",label:"Enabled"}]},{category:"isVisible",label:"Visibility",urlLabel:"visibility",type:"textoptions",options:()=>[{value:"0",label:"Hidden"},{value:"1",label:"Visible"}]}];return r.createElement("div",{className:"wrap"},re?r.createElement(E.aH,null):r.createElement(r.Fragment,null,r.createElement(E.Yh,{isUiBlock:se}),r.createElement(s.A,{className:"mb-4"},r.createElement(n.A,{sm:8,className:"usr-grp-role-search-width"},r.createElement(D.A,{key:"user-listing-search-filter",placeholder:"Search for your users...",options:(0,N.sortBy)(ge,["label"]),onChange:e=>{var{searchFilterParam:t,searchParam:a}=(0,w.kI)(e,ge);q(t),$(a,{replace:!0}),"function"==typeof(null==G?void 0:G.page)&&G.page(0)},defaultSelected:ee})),(0,w.FV)()&&r.createElement(n.A,{sm:4,className:"text-end"},r.createElement(c.A,{variant:"primary",size:"sm",className:"btn-sm",onClick:()=>{e("/user/create",{state:{tblpageData:W}})},"data-id":"addNewUser","data-cy":"addNewUser"},"Add New User"),r.createElement(i.A,{title:"Set Visibility",size:"sm",className:"ms-1 d-inline-block manage-visibility",onSelect:ie,"data-id":"hideShowVisibility","data-cy":"hideShowVisibility"},r.createElement(o.A.Item,{eventKey:"1"},"Visible"),r.createElement(o.A.Item,{eventKey:"0"},"Hidden")),r.createElement(c.A,{variant:"danger",size:"sm",title:"Delete",onClick:()=>{L.current.length>0?de():S.oR.warning("Please select atleast one user!!")},className:"ms-1 btn-sm","data-id":"deleteUserGroup","data-cy":"deleteUserGroup"},r.createElement("i",{className:"fa-fw fa fa-trash"})))),r.createElement(y.A,{data:b,columns:ue,fetchData:ce,totalCount:T,pageCount:j,currentpageIndex:M,currentpageSize:B,pagination:!0,loading:a,rowSelectOp:((0,w.FV)()||(0,w.Xm)())&&{position:"first",selectedRows:L},getRowProps:e=>({className:0==e.values.isVisible&&"row-inactive"})}),r.createElement(u.A,{show:k,onHide:de},r.createElement(u.A.Header,{closeButton:!0},r.createElement("span",{className:"text-word-break"},"Are you sure you want to delete the ",1===L.current.length?r.createElement(r.Fragment,null,r.createElement("b",null,'"',L.current[0].original.name,'"')," user ?"):r.createElement(r.Fragment,null,"selected",r.createElement("b",null," ",L.current.length)," users ?"))),r.createElement(u.A.Footer,null,r.createElement(c.A,{variant:"secondary",size:"sm",onClick:de},"Close"),r.createElement(c.A,{variant:"primary",size:"sm",onClick:()=>{oe()}},"OK"))),r.createElement(u.A,{show:z&&z.showSyncDetails,onHide:ye,size:"xl"},r.createElement(u.A.Header,null,r.createElement(u.A.Title,null,"Sync Source Details")),r.createElement(u.A.Body,null,r.createElement(A.l,{syncDetails:z.syncDteails})),r.createElement(u.A.Footer,null,r.createElement(c.A,{variant:"primary",size:"sm",onClick:ye},"OK")))))}},2634:()=>{}}]);