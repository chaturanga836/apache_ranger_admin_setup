/*! For license information please see 924.44fcdc9d76d7159b3a62.js.LICENSE.txt */
"use strict";(self.webpackChunkranger=self.webpackChunkranger||[]).push([[924],{1659:(e,r,t)=>{t.d(r,{A:()=>c});var a=t(6540),n=t(8106);function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){s(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const c=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],{navigator:t}=(0,a.useContext)(n.jb);(0,a.useEffect)((()=>{if(r){var a=t.block((r=>{var t=o(o({},r),{},{retry(){a(),setTimeout((()=>{r.retry()}),0)}});e(t)}));return a}}),[t,e,r])}((0,a.useCallback)((r=>{window.confirm(e)&&r.retry()}),[e]),r)}},3272:(e,r,t)=>{t.d(r,{A:()=>i});var a=t(6540),n=t(2465),l=t(952),o=t(5615),s=t(9007);function c(){return c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},c.apply(this,arguments)}function i(e){var{serviceDetails:r,serviceCompDetails:t,modelState:i,handleClose:u,handleSave:m}=e;return i.data?a.createElement(a.Fragment,null,a.createElement(n.A,{show:i.showModalResource,onHide:u,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},a.createElement(l.lV,{onSubmit:e=>{i.data=e,m()},initialValues:i.data,render:e=>{var{handleSubmit:i,values:m}=e;return a.createElement("form",{onSubmit:i},a.createElement(n.A.Header,{closeButton:!0},a.createElement(n.A.Title,null,"Resource Details")),a.createElement(n.A.Body,null,a.createElement(l.D0,{name:"resources"},(e=>a.createElement("div",{className:"wrap"},a.createElement(s.A,c({},e,{serviceDetails:r,serviceCompDetails:t,formValues:m,policyType:0,isMultiResources:!1})))))),a.createElement(n.A.Footer,null,a.createElement(o.A,{variant:"secondary",size:"sm",onClick:u},"Close"),a.createElement(o.A,{title:"Save",size:"sm",type:"submit"},"Save")))}}))):null}},9007:(e,r,t)=>{t.d(r,{A:()=>A});var a=t(6540),n=t(475),l=t(4479),o=t(1105),s=t(952),c=t(6005),i=t(239),u=t.n(i),m=t(2543),d=t(6474),p=t(6696),v=t(6963),f=t(3267),h=t(5787);function E(){return E=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},E.apply(this,arguments)}function y(e,r,t,a,n,l,o){try{var s=e[l](o),c=s.value}catch(e){return void t(e)}s.done?r(c):Promise.resolve(c).then(a,n)}var b={label:"None",value:"none"};function g(e){var r,{formValues:t,grpResourcesKeys:n,levelKey:l,serviceDetails:o,name:c,isMultiResources:i}=e,[u,p]=(0,a.useState)([]),[g,N]=(0,a.useState)(!1),O=(0,a.useRef)(null),S=function(){var e,r=(e=function*(e,r,t){N(!0);var a=r.name,l=n.slice(0,n.indexOf(r.level)+1),s={};l.length>0&&l.map((function(e){var r,a;s[t["resourceName-".concat(e)].name]=(0,m.isArray)(t["value-".concat(e)])?(null===(r=t["value-".concat(e)])||void 0===r||null===(a=r.map)||void 0===a?void 0:a.call(r,(e=>{var{value:r}=e;return r})))||[]:null!=t["value-".concat(e)]?[t["value-".concat(e)].value]:[]}));var c={resourceName:a,resources:s,userInput:e||""},i=[];try{var u,v;r.lookupSupported&&(i=(null===(u=(yield(0,f.fetchApi)({url:"plugins/services/lookupResource/".concat(o.name),method:"POST",data:c})).data)||void 0===u||null===(v=u.map)||void 0===v?void 0:v.call(u,(e=>({label:e,value:e}))))||[])}catch(e){var h,E;N(!1),d.oR.dismiss(O.current),null!=e&&null!==(h=e.response)&&void 0!==h&&null!==(E=h.data)&&void 0!==E&&E.msgDesc?O.current=d.oR.error(e.response.data.msgDesc):O.current=d.oR.error("Resouce lookup failed for current resource")}p(i),N(!1)},function(){var r=this,t=arguments;return new Promise((function(a,n){var l=e.apply(r,t);function o(e){y(l,a,n,o,s,"next",e)}function s(e){y(l,a,n,o,s,"throw",e)}o(void 0)}))});return function(e,t,a){return r.apply(this,arguments)}}(),A=(0,a.useRef)((0,m.debounce)(S,1e3)),x=(e,r)=>(r.trim().toLowerCase(),!0);return a.createElement(s.D0,{key:t["resourceName-".concat(l)].name,className:"form-control",name:i?"".concat(c,".value-").concat(l):"value-".concat(l),validate:t&&(null===(r=t["resourceName-".concat(l)])||void 0===r?void 0:r.mandatory)&&(e=>((e,r)=>{if(!e||0==e.length)return"Required";if(null!=r&&r.validationRegEx&&(null==e?void 0:e.length)>0){var t=new RegExp(r.validationRegEx);if("^\\*$"==r.validationRegEx&&0==t.test(e[e.length-1].value))return'Only "*" value is allowed';if("^[/*]$|^/.*?[^/]$"==r.validationRegEx&&0==t.test(e[e.length-1].value))return"Relative Path start with slash and must not end with a slash"}})(e,t["resourceName-".concat(l)])),render:e=>{var r,n,o,{input:s,meta:m}=e;return a.createElement(a.Fragment,null,a.createElement(v.A,E({},s,{id:t&&null!==(r=t["resourceName-".concat(l)])&&void 0!==r&&r.mandatory&&m.error?"isError":i?"".concat(c,".value-").concat(l):"value-".concat(l),isMulti:(o=t["resourceName-".concat(l)],null==o||!o.uiHint||!JSON.parse(o.uiHint).singleValue),isClearable:!0,isDisabled:t["resourceName-".concat(l)].value===b.value,options:u,onFocus:e=>{e.stopPropagation(),p([]),S("",t["resourceName-".concat(l)],t)},onInputChange:(e,r)=>{((e,r,t,a)=>{var{action:n}=a;"input-change"!==n||null!=e&&(N(!0),p([]),A.current(e,r,t))})(e,t["resourceName-".concat(l)],t,r)},filterOption:x,isLoading:g,styles:h.eB})),t&&(null===(n=t["resourceName-".concat(l)])||void 0===n?void 0:n.mandatory)&&m.touched&&m.error&&a.createElement("span",{className:"invalid-field"},m.error))}})}var N=t(3666);function O(){return O=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},O.apply(this,arguments)}var S={label:"None",value:"none"};function A(e){var{serviceCompDetails:r,formValues:t,serviceDetails:i,policyType:v,policyId:f,name:E,isMultiResources:y}=e,[b,A]=(0,a.useState)({loader:!1,resourceKey:-1}),x=(0,a.useRef)(null),R=(0,N._b)(r,v);(0,a.useEffect)((()=>{b.loader&&A({loader:!1,resourceKey:-1})}),[b.loader]);var w=(0,m.groupBy)(R,"level"),U=[];for(var j in w)U.push(+j);U=U.sort();var D=(e,r)=>{var a=w[e];if(0!==r){var n=U[r-1],l="resourceName-".concat(n);t&&t[l]&&(a=(0,m.filter)(w[e],{parent:t[l].name}),t[l].isValidLeaf&&a.push(S))}return a},k=e=>{var r,{name:n}=e;return t&&(null===(r=t[n])||void 0===r?void 0:r.mandatory)&&a.createElement("span",null,"*")||a.createElement("span",null,"Â ")};return U.map(((e,r)=>{var v="resourceName-".concat(e);if(0!==r){var N=((e,r)=>{var a=U[r-1],n="resourceName-".concat(a),l=!1;return t&&t[n]&&(l=(0,m.some)(w[e],{parent:t[n].name})),l})(e,r);if(!N)return null}return b.loader&&b.resourceKey<e?null:a.createElement(n.A.Group,{as:l.A,className:"mb-3",controlId:"Resource-".concat(e),key:"Resource-".concat(e)},a.createElement(o.A,{sm:3},a.createElement(s.D0,{defaultValue:!f&&D(e,r)[0],name:y?"".concat(E,".resourceName-").concat(e):"resourceName-".concat(e),render:l=>{var{input:o}=l;return t[v]?((e,r)=>{var a,n,l=!1,o="resourceName-".concat(e),s=w[e];if(0!==r&&(s=D(e,r)),1===s.length&&!(null!==(a=t[o])&&void 0!==a&&null!==(n=a.parent)&&void 0!==n&&n.length)>0)l=!0;else if(0!==r){var c=U[r-1],i="resourceName-".concat(c);1!==(0,m.filter)(s,{parent:t[i].name}).length||t[i].isValidLeaf||(l=!0)}return l})(e,r)?a.createElement("span",{className:"float-end fnt-14"},a.createElement(n.A.Label,{className:"position-relative pe-2"},D(e,r)[0].label,a.createElement(k,{name:"resourceName-".concat(e)}))):a.createElement("div",{className:"resource-drop-down"},a.createElement("span",{className:"w-75"},a.createElement(c.Ay,O({},o,{options:D(e,r),getOptionLabel:e=>e.label,getOptionValue:e=>e.name,onChange:e=>((e,r,a)=>{for(var n=a;n<U.length;n++){var l=U[n];delete t["resourceName-".concat(l)],delete t["value-".concat(l)],delete t["isExcludesSupport-".concat(l)],delete t["isRecursiveSupport-".concat(l)]}delete t["value-".concat(U[a])];for(var o=e.name,s=a+1;s<U.length;s++){var c=U[s],i=R.find((e=>{if(null!=e&&e.parent)return e.parent===o}));i&&(t["resourceName-".concat(c)]=i,o=i.name)}"udf"===(null==e?void 0:e.name)&&"database"===(null==e?void 0:e.parent)&&(d.oR.dismiss(x.current),x.current=d.oR.warning((0,p.oG)())),r.onChange(e),A({loader:!0,resourceKey:U[a]})})(e,o,r),isSearchable:!1,styles:h.eB}))),a.createElement(k,{name:"resourceName-".concat(e)})):null}})),t["resourceName-".concat(e)]&&a.createElement(a.Fragment,null,a.createElement(o.A,{sm:5},a.createElement(g,{levelKey:e,formValues:t,grpResourcesKeys:U,serviceDetails:i,name:E,isMultiResources:y}))),t["resourceName-".concat(e)]&&a.createElement(o.A,{sm:4},a.createElement(l.A,null,t["resourceName-".concat(e)].excludesSupported&&a.createElement(o.A,{sm:5},a.createElement(s.D0,{className:"form-control",name:y?"".concat(E,".isExcludesSupport-").concat(e):"isExcludesSupport-".concat(e),render:r=>{var{input:t}=r;return a.createElement(u(),O({},t,{checked:!(!1===t.value),onlabel:"Include",onstyle:"primary",offlabel:"Exclude",offstyle:"outline-secondary",style:"w-100",size:"xs",key:"isExcludesSupport-".concat(e)}))}})),t["resourceName-".concat(e)].recursiveSupported&&a.createElement(o.A,{sm:5,className:"toggle-switch"},a.createElement(s.D0,{className:"form-control",name:y?"".concat(E,".isRecursiveSupport-").concat(e):"isRecursiveSupport-".concat(e),render:r=>{var{input:t}=r;return a.createElement(u(),O({},t,{checked:!(!1===t.value),onlabel:"Recursive",onstyle:"primary",width:130,offlabel:"Non-recursive",offstyle:"outline-secondary",size:"xs",key:"isRecursiveSupport-".concat(e)}))}})))))}))}},65:(e,r,t)=>{t.r(r),t.d(r,{default:()=>D});var a=t(6540),n=t(952),l=t(4479),o=t(1105),s=t(5615),c=t(8106),i=t(6005),u=t(8539),m=t(3267),d=t(2543),p=t(2431),v=t(3088),f=t(924),h=t(3272),E=t(1376),y=t(6474),b=t(3666),g=t(5787),N=t(1659),O=t(4283);function S(){return S=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},S.apply(this,arguments)}function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function x(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?A(Object(t),!0).forEach((function(r){R(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function R(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function w(e,r,t,a,n,l,o){try{var s=e[l](o),c=s.value}catch(e){return void t(e)}s.done?r(c):Promise.resolve(c).then(a,n)}function U(e){return function(){var r=this,t=arguments;return new Promise((function(a,n){var l=e.apply(r,t);function o(e){w(l,a,n,o,s,"next",e)}function s(e){w(l,a,n,o,s,"throw",e)}o(void 0)}))}}var j=e=>{var{isDirtyField:r,isUnblock:t}=e;return(0,N.A)("Are you sure you want to leave",r&&!t),null};const D=()=>{var e=(0,c.Zp)(),r=(0,c.g)(),t=(0,a.useRef)(null),{allServiceDefs:N}=(0,d.cloneDeep)((0,O.Ji)()),[A,R]=(0,a.useState)([]),[w,D]=(0,a.useState)({}),[k,C]=(0,a.useState)({}),[I,P]=(0,a.useState)({}),[z,G]=(0,a.useState)([]),[M,L]=(0,a.useState)(!0),[B,V]=(0,a.useState)({showModalResource:!1,data:null,inputval:null,index:0}),[T,F]=(0,a.useState)(!1),[q,Z]=(0,a.useState)(!1),[K,H]=(0,a.useState)(!1),[_,$]=(0,a.useState)(!1),[J,X]=(0,a.useState)(!1),[Y,Q]=(0,a.useState)(!1),[W,ee]=(0,a.useState)([]),[re,te]=(0,a.useState)([]),[ae,ne]=(0,a.useState)([]),[le,oe]=(0,a.useState)([]);(0,a.useEffect)((()=>{ce()}),[r.zoneId]);var se=()=>{V({showModalResource:!1,data:null,inputval:null,index:0})},ce=function(){var e=U((function*(){yield ie(),yield ue()}));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=U((function*(){var e=(yield(0,m.fetchApi)({url:"plugins/services"})).data.services.filter((e=>"tag"!==e.type&&"kms"!==e.type));R(e);var r=(0,d.groupBy)(e,"type"),t=[];for(var n of Object.keys(r))t.push({label:a.createElement("span",{className:"fw-bold text-body h6"},n),options:r[n].map((e=>({label:e.name,value:e.name})))});G(t)}));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=U((function*(){var e;if(void 0!==r.zoneId){var t,a=r.zoneId;try{e=yield(0,m.fetchApi)({url:"zones/zones/".concat(a)})}catch(e){var n,l;console.error("Error occurred while fetching Zone or CSRF headers! ".concat(e)),null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(l=n.data)&&void 0!==l&&l.msgDesc&&y.oR.error(e.response.data.msgDesc)}D(null===(t=e)||void 0===t?void 0:t.data)}L(!1)}));return function(){return e.apply(this,arguments)}}(),me=function(){var a=U((function*(a){var n,l,o,s,c,i,u={};if(void 0!==r.zoneId?(n=r.zoneId,l="put",o="/zones/zones/".concat(n),s="updated",u.id=n,c="Error occurred while updating a zone"):(l="post",o="/zones/zones",s="created",c="Error occurred while creating a zone!"),u.name=a.name,u.description=a.description||"",u.adminUsers=[],a.adminUsers)for(var p of Object.keys(a.adminUsers))u.adminUsers.push(a.adminUsers[p].value);if(u.adminUserGroups=[],a.adminUserGroups)for(var v of Object.keys(a.adminUserGroups))u.adminUserGroups.push(a.adminUserGroups[v].label||"");if(u.auditUsers=[],a.auditUsers)for(var f of Object.keys(a.auditUsers))u.auditUsers.push(a.auditUsers[f].label||"");if(u.auditUserGroups=[],a.auditUserGroups)for(var h of Object.keys(a.auditUserGroups))u.auditUserGroups.push(a.auditUserGroups[h].label||"");if(a.adminRoles)for(var E of(u.adminRoles=[],Object.keys(a.adminRoles)))u.adminRoles.push(a.adminRoles[E].label||"");if(a.auditRoles)for(var g of(u.auditRoles=[],Object.keys(a.auditRoles)))u.auditRoles.push(a.auditRoles[g].label||"");if(u.tagServices=[],a.tagServices)for(var N of Object.keys(a.tagServices))u.tagServices.push(a.tagServices[N].label||"");if(u.services={},!(0,d.isEmpty)(Object.keys(a.tableList||{}))){var O=function(e){var r=a.tableList[e].serviceName,t=a.tableList[e].resources;u.services[r]={},u.services[r].resources=[],t.map((e=>{var t={};return(0,d.pickBy)(e,((r,a)=>{e["value-".concat(r.level)]&&e["value-".concat(r.level)].length>0&&a.includes("resourceName")&&(t[r.name]=e["value-".concat(r.level)].map((e=>e.value)))})),u.services[r].resources.push(t)}))};for(var S of Object.keys(a.tableList))O(S)}r.zoneId&&(u=x(x({},w),u)),F(!0);try{Z(!0),i=yield(0,m.fetchApi)({url:o,method:l,data:u}),Z(!1),y.oR.dismiss(t.current),y.oR.current=y.oR.success("Success! Security zone ".concat(s," successfully")),e("/zones/zone/".concat(i.data.id))}catch(e){Z(!1),(0,b.ig)(e),console.error("Error occurred while ".concat(c," Zone"))}}));return function(e){return a.apply(this,arguments)}}(),de=function(){var e=U((function*(e){var r={isVisible:1},t=[];e&&(r.name=e||"");try{var a;t=null===(a=(yield(0,m.fetchApi)({url:"xusers/lookup/users",params:r})).data)||void 0===a?void 0:a.vXStrings}catch(e){console.error("Error occurred while fetching Users! ".concat(e)),(0,b.ig)(e)}return(0,d.map)(t,(function(e){return{value:e.value,label:e.value}}))}));return function(r){return e.apply(this,arguments)}}(),pe=function(){var e=U((function*(e){var r={isVisible:1},t=[];e&&(r.name=e||"");try{var a;t=null===(a=(yield(0,m.fetchApi)({url:"xusers/lookup/groups",params:r})).data)||void 0===a?void 0:a.vXStrings}catch(e){console.error("Error occurred while fetching Groups! ".concat(e)),(0,b.ig)(e)}return(0,d.map)(t,(function(e){return{label:e.value,value:e.value}}))}));return function(r){return e.apply(this,arguments)}}(),ve=function(){var e=U((function*(e){var r={roleNamePartial:e||""},t=[];try{t=(yield(0,m.fetchApi)({url:"roles/roles",params:r})).data.roles}catch(e){console.error("Error occurred while fetching Roles! ".concat(e)),(0,b.ig)(e)}return t.map((e=>({label:e.name,value:e.name})))}));return function(r){return e.apply(this,arguments)}}(),fe=function(){var e=U((function*(e){var r={};return e&&(r.serviceNamePartial=e||"",r.serviceType="tag"),(yield(0,m.fetchApi)({url:"plugins/services",params:r})).data.services.filter((e=>"tag"==e.type)).map((e=>{var{name:r}=e;return{label:r,value:r}}))}));return function(r){return e.apply(this,arguments)}}(),he=()=>{if(-1===B.index){var e=[];(e=B.inputval.input.value).push(B.data),B.inputval.input.onChange(e),se()}else{var r=B.inputval.input.value;r[B.index]=B.data,B.inputval.input.onChange(r),se()}},Ee=()=>{H(!0),de().then((e=>{ee(e),H(!1)}))},ye=()=>{$(!0),pe().then((e=>{te(e),$(!1)}))},be=()=>{X(!0),ve().then((e=>{ne(e),X(!1)}))};return a.createElement(a.Fragment,null,a.createElement("div",{className:"clearfix"},a.createElement("div",{className:"header-wraper"},a.createElement("h3",{className:"wrap-header bold"},void 0!==r.zoneId?"Edit":"Create"," Zone"),(0,b.zH)(["SecurityZone",void 0!==r.zoneId?"ZoneEdit":"ZoneCreate"],r.zoneId))),M?a.createElement(g.aH,null):a.createElement("div",{className:"wrap"},a.createElement(n.lV,{onSubmit:me,keepDirtyOnReinitialize:!0,initialValuesEqual:()=>!0,initialValues:void 0!==r.zoneId&&(()=>{var e={};e.name=w.name,e.description=w.description,e.adminUserGroups=[],w.adminUserGroups&&w.adminUserGroups.map((r=>e.adminUserGroups.push({label:r,value:r}))),e.adminUsers=[],w.adminUsers&&w.adminUsers.map((r=>e.adminUsers.push({label:r,value:r}))),e.auditUserGroups=[],w.auditUserGroups&&w.auditUserGroups.map((r=>e.auditUserGroups.push({label:r,value:r}))),e.auditUsers=[],w.auditUsers&&w.auditUsers.map((r=>e.auditUsers.push({label:r,value:r}))),e.adminRoles=[],w.adminRoles&&w.adminRoles.map((r=>e.adminRoles.push({label:r,value:r}))),e.auditRoles=[],w.auditRoles&&w.auditRoles.map((r=>e.auditRoles.push({label:r,value:r}))),e.tagServices=[],w.tagServices&&w.tagServices.map((r=>e.tagServices.push({label:r,value:r}))),e.resourceServices=[],w.services&&Object.keys(w.services).map((r=>e.resourceServices.push({label:r,value:r}))),e.tableList=[];var r=function(r){var t={};t.serviceName=r;var a=(0,d.find)(A,["name",r]);t.serviceType=a.type;var n,l=(0,d.find)(N,["name",a.type]);for(var o of l.resources)o.recursiveSupported=!1,o.excludesSupported=!1,10!==o.level&&(o.mandatory=!1);t.resources=[],(0,d.isEmpty)(w.services[r].resources)||null===(n=w.services[r].resources)||void 0===n||n.map((e=>{var r={},a=[];Object.entries(e).map((e=>{var[t,n]=e,o=(0,d.find)(l.resources,["name",t]);r["resourceName-".concat(o.level)]=o,r["value-".concat(o.level)]=n.map((e=>({label:e,value:e}))),a.push({level:o.level,name:o.name})})),a=(0,d.maxBy)(a,"level");var n=(0,d.find)((0,d.sortBy)(l.resources,"itemId"),["parent",a.name]);n&&null!=n&&n.isValidLeaf&&(r["resourceName-".concat(n.level)]={label:"None",value:"none"}),t.resources.push(r)})),e.tableList.push(t)};for(var t of Object.keys(w.services||{}))r(t);return e})(),mutators:x({},f.A),validate:e=>{var r={};return e.name?E.hp.NAME_VALIDATION.regexforNameValidation.test(e.name)||(r.name={text:E.hp.NAME_VALIDATION.regexforNameValidationMessage}):r.name={required:!0,text:"Required"},(0,d.isEmpty)(null==e?void 0:e.adminUsers)&&(0,d.isEmpty)(null==e?void 0:e.adminUserGroups)&&(0,d.isEmpty)(null==e?void 0:e.adminRoles)&&(r.adminRoles={required:!0,text:"Please provide atleast one admin user or group or role !"},r.adminUserGroups={required:!0,text:""},r.adminUsers={required:!0,text:""}),(0,d.isEmpty)(null==e?void 0:e.auditUsers)&&(0,d.isEmpty)(null==e?void 0:e.auditUserGroups)&&(0,d.isEmpty)(null==e?void 0:e.auditRoles)&&(r.auditRoles={required:!0,text:"Please provide atleast one audit user or group or role !"},r.auditUserGroups={required:!0,text:""},r.auditUsers={required:!0,text:""}),r},render:r=>{var{handleSubmit:t,dirty:c,values:m,invalid:f,errors:E,form:{mutators:{push:y,remove:b}},form:O,submitting:x}=r;return a.createElement(l.A,null,a.createElement(j,{isDirtyField:c,isUnblock:T}),a.createElement(o.A,{sm:12},a.createElement("form",{onSubmit:e=>{t(e)}},a.createElement("p",{className:"form-header"},"Zone Details:"),a.createElement(n.D0,{name:"name"},(e=>{var{input:r,meta:t}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Zone Name *")),a.createElement(o.A,{xs:4},a.createElement("input",S({},r,{type:"text",id:t.error&&t.touched?"isError":"name",className:t.error&&t.touched?"form-control border-danger":"form-control","data-cy":"name"})),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error.text)))})),a.createElement(n.D0,{name:"description"},(e=>{var{input:r}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Zone Description")),a.createElement(o.A,{xs:4},a.createElement("textarea",S({},r,{className:"form-control","data-cy":"description"}))))})),a.createElement("p",{className:"form-header"},"Zone Administration:"),a.createElement(n.D0,{name:"adminUsers",render:e=>{var{input:r,meta:t}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Admin Users")),a.createElement(o.A,{xs:4},a.createElement(u.A,S({},r,{styles:t.error&&t.touched?g.uU:g.eB,id:t.error&&t.touched?"isError":"auditUsers",cacheOptions:!0,loadOptions:de,onFocus:()=>{Ee()},defaultOptions:W,noOptionsMessage:()=>K?"Loading...":"No options",isMulti:!0,components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},isClearable:!0,placeholder:"Select Users"}))))}}),a.createElement(n.D0,{name:"adminUserGroups",render:e=>{var{input:r,meta:t}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Admin Usergroups")),a.createElement(o.A,{xs:4},a.createElement(u.A,S({},r,{styles:t.error&&t.touched?g.uU:g.eB,id:t.error&&t.touched?"isError":"adminUserGroups",cacheOptions:!0,loadOptions:pe,onFocus:()=>{ye()},defaultOptions:re,noOptionsMessage:()=>_?"Loading...":"No options",isMulti:!0,components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},isClearable:!0,placeholder:"Select Groups"}))))}}),a.createElement(n.D0,{name:"adminRoles",render:e=>{var{input:r,meta:t}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Admin Roles")),a.createElement(o.A,{xs:4},a.createElement(u.A,S({},r,{styles:t.error&&t.touched?g.uU:g.eB,id:t.error&&t.touched?"isError":"adminRoles",cacheOptions:!0,loadOptions:ve,onFocus:()=>{be()},defaultOptions:ae,noOptionsMessage:()=>J?"Loading...":"No options",isMulti:!0,components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},isClearable:!0,placeholder:"Select Roles"})),t.touched&&t.error&&a.createElement("span",{className:"invalid-field"},t.error.text)))}}),a.createElement(n.D0,{name:"auditUsers",render:e=>{var{input:r,meta:t}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Auditor Users")),a.createElement(o.A,{xs:4},a.createElement(u.A,S({},r,{styles:t.error&&t.touched?g.uU:g.eB,id:t.error&&t.touched?"isError":"auditUsers",cacheOptions:!0,loadOptions:de,onFocus:()=>{Ee()},defaultOptions:W,noOptionsMessage:()=>K?"Loading...":"No options",isMulti:!0,components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},isClearable:!0,placeholder:"Select Users"}))))}}),a.createElement(n.D0,{name:"auditUserGroups",render:e=>{var{input:r,meta:t}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Auditor Usergroups")),a.createElement(o.A,{xs:4},a.createElement(u.A,S({},r,{styles:t.error&&t.touched?g.uU:g.eB,id:t.error&&t.touched?"isError":"auditUserGroups",cacheOptions:!0,loadOptions:pe,onFocus:()=>{ye()},defaultOptions:re,noOptionsMessage:()=>_?"Loading...":"No options",isMulti:!0,components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},isClearable:!0,placeholder:"Select Groups"}))))}}),a.createElement(n.D0,{name:"auditRoles",render:e=>{var{input:r,meta:t}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Auditor Roles")),a.createElement(o.A,{xs:4},a.createElement(u.A,S({},r,{styles:t.error&&t.touched?g.uU:g.eB,id:t.error&&t.touched?"isError":"auditRoles",cacheOptions:!0,loadOptions:ve,onFocus:()=>{be()},defaultOptions:ae,noOptionsMessage:()=>J?"Loading...":"No options",isMulti:!0,components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},isClearable:!0,placeholder:"Select Roles"})),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error.text)))}}),a.createElement("p",{className:"form-header"},"Services:"),a.createElement(n.D0,{name:"tagServices",render:e=>{var{input:r}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Tag Services")),a.createElement(o.A,{xs:6},a.createElement(u.A,S({},r,{cacheOptions:!0,loadOptions:fe,onFocus:()=>{Q(!0),fe().then((e=>{oe(e),Q(!1)}))},defaultOptions:le,noOptionsMessage:()=>Y?"Loading...":"No options",isMulti:!0,components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},isClearable:!0,placeholder:"Select Tag Services",styles:g.eB}))))}}),a.createElement(n.D0,{name:"resourceServices",render:e=>{var{input:r}=e;return a.createElement(l.A,{className:"form-group"},a.createElement(o.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Resource Services")),a.createElement(o.A,{xs:6},a.createElement(i.Ay,S({},r,{onChange:(e,t)=>((e,r,t,a,n)=>{if("select-option"==e.action){var l=(0,d.find)(A,{name:e.option.value});a("tableList",{serviceName:e.option.value,serviceType:l.type,resources:[]})}var o;"remove-value"!=e.action&&"pop-value"!=e.action||n("tableList",(0,d.findIndex)(r.value,["value",null==e||null===(o=e.removedValue)||void 0===o?void 0:o.value])),r.onChange(t)})(t,r,e,y,b),isMulti:!0,components:{DropdownIndicator:()=>null,IndicatorSeparator:()=>null},options:z,isClearable:!1,isSearchable:!0,placeholder:"Select Resource Services",styles:g.eB}))))}}),a.createElement(p.A,{bordered:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{className:"p-3 mb-2 bg-white text-dark  align-middle text-center"},"Service Name"),a.createElement("th",{className:"p-3 mb-2 bg-white text-dark align-middle text-center"},"Service Type"),a.createElement("th",{className:"p-3 mb-2 bg-white text-dark align-middle text-center"},"Resource"))),a.createElement("tbody",null,a.createElement(v.ED,{name:"tableList"},(e=>{var{fields:r}=e;return r.value&&r.value.length>0?r.map(((e,t)=>a.createElement("tr",{className:"bg-white",key:t},a.createElement("td",{className:"align-middle",width:"20%"},r.value[t].serviceName),a.createElement("td",{className:"align-middle",width:"20%"},r.value[t].serviceType),a.createElement("td",{className:"text-center",key:e,width:"33%",height:"55px"},a.createElement(n.D0,{name:"".concat(e,".resources"),render:e=>a.createElement(a.Fragment,null,e.input.value&&e.input.value.length>0?e.input.value.map(((n,c)=>a.createElement("div",{className:"resource-group text-break",key:c},a.createElement(l.A,null,a.createElement(o.A,{xs:9},a.createElement("span",{className:"m-t-xs"},((e,r)=>{var t={},n=(0,d.find)(N,["name",r]);for(var l of n.resources)l.recursiveSupported=!1,l.excludesSupported=!1,10!==l.level&&(l.mandatory=!1);var o=(0,d.groupBy)(n.resources||[],"level"),s=[];for(var c in o)s.push(+c);for(var i of(s=s.sort(),t.resources={},s))e["resourceName-".concat(i)]&&"none"!==e["resourceName-".concat(i)].value&&(t.resources[e["resourceName-".concat(i)].name]={isExcludes:e["isExcludesSupport-".concat(i)]||!1,isRecursive:e["isRecursiveSupport-".concat(i)]||!1,values:void 0!==e["value-".concat(i)]?e["value-".concat(i)].map((e=>{var{value:r}=e;return r})):""});return Object.keys(t.resources).map(((e,r)=>a.createElement("p",{key:r},0!==t.resources[e].values.length?a.createElement(a.Fragment,null,a.createElement("strong",null,"".concat(e," : ")),a.createElement("span",null,t.resources[e].values.map((e=>e)).join(", "))):"")))})(n,r.value[t].serviceType))),a.createElement(o.A,{xs:3},a.createElement(s.A,{title:"edit",className:"btn btn-primary m-r-xs btn-mini m-r-5",size:"sm",onClick:()=>((e,r,t)=>{var a=r.input.value[e],n=(0,d.find)(N,["name",t.serviceType]),l=(0,d.find)(A,["name",t.serviceName]);for(var o of n.resources)o.recursiveSupported=!1,o.excludesSupported=!1,10!==o.level&&(o.mandatory=!1);V({showModalResource:!0,data:a,inputval:r,index:e}),C(n),P(l)})(c,e,r.value[t]),"data-action":"editResource","data-cy":"editResource"},a.createElement("i",{className:"fa-fw fa fa-edit"})),a.createElement(s.A,{title:"delete",className:"btn btn-danger active  btn-mini",size:"sm",onClick:()=>((e,r)=>{r.input.value.splice(e,1),se()})(c,e),"data-action":"delete","data-cy":"delete"},a.createElement("i",{className:"fa-fw fa fa-remove"}))))))):"",a.createElement("div",null,a.createElement(s.A,{title:"add",className:"btn btn-mini pull-left",variant:"outline-secondary",size:"sm",onClick:()=>((e,r)=>{var t=(0,d.find)(N,["name",r.serviceType]),a=(0,d.find)(A,["name",r.serviceName]);for(var n of t.resources)n.recursiveSupported=!1,n.excludesSupported=!1,10!==n.level&&(n.mandatory=!1);V({showModalResource:!0,data:{},inputval:e,index:-1}),C(t),P(a)})(e,r.value[t]),"data-action":"addResource","data-cy":"addResource"},a.createElement("i",{className:"fa-fw fa fa-plus "}))))}))))):a.createElement("tr",null,a.createElement("td",{colSpan:"3",className:"text-center text-secondary"},a.createElement("h6",null,"No Zone Data Found!!")))})))),a.createElement(l.A,{className:"form-actions"},a.createElement(o.A,{sm:{span:9,offset:3}},a.createElement(s.A,{variant:"primary",onClick:()=>{if(f){var e=document.getElementById("isError")||document.getElementById(Object.keys(E)[0])||document.querySelector("input[name=".concat(Object.keys(E)[0],"]"))||document.querySelector("input[id=".concat(Object.keys(E)[0],"]"))||document.querySelector('span[className="invalid-field"]');(0,g.Nc)(e)}t(m)},size:"sm",disabled:x,"data-id":"save","data-cy":"save"},"Save"),a.createElement(s.A,{variant:"secondary",type:"button",size:"sm",onClick:()=>{O.reset,F(!0),e(-1)},"data-id":"cancel","data-cy":"cancel"},"Cancel")))),a.createElement(h.A,{serviceDetails:I,serviceCompDetails:k,cancelButtonText:"Cancel",actionButtonText:"Submit",modelState:B,handleSave:he,handleClose:se})))}}),a.createElement(g.Yh,{isUiBlock:q})))}},5228:e=>{var r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map((function(e){return r[e]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var l,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var i in l=Object(arguments[c]))t.call(l,i)&&(s[i]=l[i]);if(r){o=r(l);for(var u=0;u<o.length;u++)a.call(l,o[u])&&(s[o[u]]=l[o[u]])}}return s}}}]);