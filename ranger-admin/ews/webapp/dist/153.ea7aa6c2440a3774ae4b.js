"use strict";(self.webpackChunkranger=self.webpackChunkranger||[]).push([[153],{1659:(e,r,t)=>{t.d(r,{A:()=>i});var a=t(6540),s=t(8106);function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const i=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],{navigator:t}=(0,a.useContext)(s.jb);(0,a.useEffect)((()=>{if(r){var a=t.block((r=>{var t=l(l({},r),{},{retry(){a(),setTimeout((()=>{r.retry()}),0)}});e(t)}));return a}}),[t,e,r])}((0,a.useCallback)((r=>{window.confirm(e)&&r.retry()}),[e]),r)}},8725:(e,r,t)=>{t.d(r,{l:()=>o});var a=t(6540),s=t(2431),n=t(1376),l=t(9828);function o(e){return 0==Object.keys(e.syncDetails).length?a.createElement(a.Fragment,null,a.createElement(s.A,{bordered:!0,size:"sm"},a.createElement("thead",{className:"thead-light"},a.createElement("tr",null,a.createElement("th",{className:" text-center"},"Name"),a.createElement("th",{className:" text-center"},"Value"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"text-center text-muted",colSpan:"2"},"No Sync Details Found!!"))))):a.createElement(a.Fragment,null,a.createElement(s.A,{bordered:!0,size:"sm"},a.createElement("thead",{className:"thead-light"},a.createElement("tr",null,a.createElement("th",{className:" text-center"},"Name"),a.createElement("th",{className:" text-center"},"Value"))),a.createElement("tbody",null,Object.entries(e.syncDetails).map((e=>{var[r,t]=e;return a.createElement("tr",{key:r},a.createElement("td",null,n.im[r]?n.im[r]:r),a.createElement("td",null,t?"syncTime"==r||"lastModified"==r?(0,l.Ay)(t,"mm/dd/yyyy hh:MM:ss TT"):t:"--"))})))))}},5153:(e,r,t)=>{t.d(r,{A:()=>R});var a=t(6540),s=t(4479),n=t(1105),l=t(5615),o=t(952),i=t(5787),c=t(8539),m=t(6005),d=t(3267),u=t(1376),p=t(6474),E=t(3666),f=t(4283),N=t(2543),b=t(8725),g=t(6696),v=t(8106),y=t(1659);function A(){return A=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},A.apply(this,arguments)}function h(e,r,t,a,s,n,l){try{var o=e[n](l),i=o.value}catch(e){return void t(e)}o.done?r(i):Promise.resolve(i).then(a,s)}function O(e){return function(){var r=this,t=arguments;return new Promise((function(a,s){var n=e.apply(r,t);function l(e){h(n,a,s,l,o,"next",e)}function o(e){h(n,a,s,l,o,"throw",e)}l(void 0)}))}}function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach((function(r){I(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function I(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var L={blockUI:!1},D=e=>{var{isDirtyField:r,isUnblock:t}=e;return(0,y.A)("Are you sure you want to leave",r&&!t),null};function x(e,r){if("SET_BLOCK_UI"===r.type)return S(S({},e),{},{blockUI:r.blockUI});throw new Error}const R=function(e){var r,{state:t}=(0,v.zy)(),y=(0,v.Zp)(),[h,w]=(0,a.useReducer)(x,L),{blockUI:I}=h,{isEditView:R,userInfo:_}=e,[P,U]=(0,a.useState)(!1),j=a.useRef(null),C=(null==_?void 0:_.userSource)==u.zO.USER_EXTERNAL.value||(null==_?void 0:_.userSource)==u.zO.USER_FEDERATED.value,T=function(){var e=O((function*(e){var r={};if(r.name=e.name,r.password=e.password,r.firstName=e.firstName,r.lastName=e.lastName,r.emailAddress=e.emailAddress,r.userRoleList=e.userRoleList?[e.userRoleList.value]:[],e.groupIdList&&(r.groupIdList=e.groupIdList.map((e=>e.value+""))),r.status=u.FX.ACT_STATUS_ACTIVE.value,U(!0),R){var a=S(S({},_),r);delete a.password;try{w({type:"SET_BLOCK_UI",blockUI:!0}),yield(0,d.fetchApi)({url:"xusers/secure/users/".concat(_.id),method:"put",data:a}),w({type:"SET_BLOCK_UI",blockUI:!1});var s=(0,N.cloneDeep)((0,f.VM)());s.loginId==_.name&&(s.firstName=a.firstName,s.emailAddress=a.emailAddress,s.lastName=a.lastName,(0,f.p)(s)),p.oR.success("User updated successfully!!"),y("/users/usertab")}catch(e){w({type:"SET_BLOCK_UI",blockUI:!1}),(0,E.ig)(e),console.error("Error occurred while updating user")}}else try{w({type:"SET_BLOCK_UI",blockUI:!0}),yield(0,d.fetchApi)({url:"xusers/secure/users",method:"post",data:r});var n={};t&&null!==t&&(n=t.tblpageData,t.tblpageData.pageRecords%t.tblpageData.pageSize==0?n.totalPage=t.tblpageData.totalPage+1:void 0!==t&&(n.totalPage=t.tblpageData.totalPage)),w({type:"SET_BLOCK_UI",blockUI:!1}),p.oR.success("User created successfully!!"),y("/users/usertab",{state:{showLastPage:!0,addPageData:n}})}catch(e){w({type:"SET_BLOCK_UI",blockUI:!1}),(0,E.ig)(e),console.error("Error occurred while creating user")}null!==j.current&&p.oR.dismiss(j.current)}));return function(r){return e.apply(this,arguments)}}(),k=e=>{var{input:r}=e,t=function(){var e=O((function*(e){var r={},t=[];e&&(r.name=e||"");var a=yield(0,d.fetchApi)({url:"xusers/groups",params:r});return a.data&&a.data.vXGroups&&(t=a.data.vXGroups.map((e=>({label:e.name,value:e.id})))),t}));return function(r){return e.apply(this,arguments)}}();return a.createElement(c.A,A({},r,{id:"groupIdList","data-cy":"groupIdList",cacheOptions:!0,loadOptions:t,defaultOptions:!0,isMulti:!0,isDisabled:!!(R&&_&&C),styles:i.eB}))},M=()=>{var e,r=(0,f.VM)();if(R&&_){if(_.userSource==u.zO.USER_EXTERNAL.value&&(e=!0),_.userSource==u.zO.USER_FEDERATED.value)return!0;e="admin"!=r.loginId&&("admin"==_.name||"ROLE_SYS_ADMIN"!=r.userRoleList[0]&&"ROLE_KEY_ADMIN"!=r.userRoleList[0]),_.name==r.loginId&&(e=!0)}return e},z=()=>(0,E.Wr)();return a.createElement(a.Fragment,null,a.createElement(o.lV,{onSubmit:T,keepDirtyOnReinitialize:!0,validate:e=>{var r={};return e.name?u.hp.NAME_VALIDATION.regexExpressionForName.test(e.name)||(r.name=u.hp.NAME_VALIDATION.nameValidationMessage):r.name="Required",e.password||R||(r.password="Required"),e.passwordConfirm||R||(r.passwordConfirm="Required"),R?e.firstName||_.userSource===u.zO.USER_EXTERNAL.value||_.userSource===u.zO.USER_FEDERATED.value||(r.firstName="Required"):e.firstName?u.hp.NAME_VALIDATION.regexExpressionForFirstAndLastName.test(e.firstName)||(r.firstName=u.hp.NAME_VALIDATION.secondaryNameValidationMessage):r.firstName="Required",(0,N.isEmpty)(e.lastName)&&(0,N.isUndefined)(e.lastName)||!(e.lastName.length>0)||u.hp.NAME_VALIDATION.regexExpressionForFirstAndLastName.test(e.lastName)||(r.lastName=u.hp.NAME_VALIDATION.secondaryNameValidationMessage),e&&(0,N.has)(e,"password")&&!u.hp.PASSWORD.regexExpression.test(e.password)&&(r.password=u.hp.PASSWORD.message),e&&(0,N.has)(e,"password")&&(0,N.has)(e,"passwordConfirm")&&e.password!==e.passwordConfirm&&(r.passwordConfirm="Password must be match with new password"),(0,N.isEmpty)(e.emailAddress)&&(0,N.isUndefined)(e.emailAddress)||u.hp.EMAIL_VALIDATION.regexExpressionForEmail.test(e.emailAddress)||(r.emailAddress=u.hp.EMAIL_VALIDATION.message),r},initialValues:(r={},R&&_&&(r.name=_.name,r.firstName=_.firstName,r.lastName=_.lastName,r.emailAddress=_.emailAddress,r.firstName=_.firstName),_&&_.userRoleList?r.userRoleList={label:u.fo[_.userRoleList[0]].label,value:_.userRoleList[0]}:r.userRoleList=z()[0],_&&_.groupIdList&&_.groupNameList&&(r.groupIdList=_.groupNameList.map(((e,r)=>({label:e,value:_.groupIdList[r]})))),r),render:e=>{var{handleSubmit:r,form:t,submitting:c,values:d,invalid:f,errors:N,dirty:v}=e;return a.createElement("div",{className:"wrap user-role-grp-form"},a.createElement(D,{isDirtyField:v,isUnblock:P}),a.createElement("form",{onSubmit:e=>{r(e)}},a.createElement(o.D0,{name:"name"},(e=>{var{input:r,meta:t}=e;return a.createElement(s.A,{className:"form-group"},a.createElement(n.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"User Name *")),a.createElement(n.A,{xs:4,className:"position-relative"},a.createElement("input",A({},r,{type:"text",name:"name",placeholder:"User Name",id:t.error&&t.touched?"isError":"name",className:t.error&&t.touched?"form-control border-danger":"form-control",disabled:!!R,"data-cy":"name"})),a.createElement(E.mo,{css:"input-box-info-icon",position:"right",message:g.Nz.MESSAGE.userNameValidationMsg}),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error)))})),!R&&a.createElement(o.D0,{name:"password"},(e=>{var{input:r,meta:t}=e;return a.createElement(s.A,{className:"form-group"},a.createElement(n.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"New Password *")),a.createElement(n.A,{xs:4,className:"position-relative"},a.createElement("input",A({},r,{type:"password",autoComplete:"off",name:"password",placeholder:"Enter New Password",id:t.error&&t.touched?"isError":"password",className:t.error&&t.touched?"form-control border-danger":"form-control","data-cy":"password"})),a.createElement(E.mo,{css:"input-box-info-icon",position:"right",message:a.createElement("p",{className:"pd-10 mb-0",style:{fontSize:"small"}},g.Nz.MESSAGE.passwordvalidationinfomessage)}),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error)))})),!R&&a.createElement(o.D0,{name:"passwordConfirm"},(e=>{var{input:r,meta:t}=e;return a.createElement(s.A,{className:"form-group"},a.createElement(n.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Password Confirm *")),a.createElement(n.A,{xs:4,className:"position-relative"},a.createElement("input",A({},r,{name:"passwordConfirm",type:"password",autoComplete:"off",placeholder:"Confirm New Password",id:t.error&&t.touched?"isError":"passwordConfirm",className:t.error&&t.touched?"form-control border-danger":"form-control","data-cy":"passwordConfirm"})),a.createElement(E.mo,{css:"input-box-info-icon",position:"right",message:a.createElement("p",{className:"pd-10 mb-0",style:{fontSize:"small"}},g.Nz.MESSAGE.passwordvalidationinfomessage)}),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error)))})),a.createElement(o.D0,{name:"firstName"},(e=>{var{input:r,meta:t}=e;return a.createElement(s.A,{className:"form-group"},a.createElement(n.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"First Name *")),a.createElement(n.A,{xs:4,className:"position-relative"},a.createElement("input",A({},r,{name:"firstName",type:"text",placeholder:"First Name",id:t.error&&t.touched?"isError":"firstName",className:t.error&&t.touched?"form-control border-danger":"form-control",disabled:!!(R&&_&&C),"data-cy":"firstName"})),a.createElement(E.mo,{css:"input-box-info-icon",position:"right",message:g.Nz.MESSAGE.firstNameValidationMsg}),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error)))})),a.createElement(o.D0,{name:"lastName"},(e=>{var{input:r,meta:t}=e;return a.createElement(s.A,{className:"form-group"},a.createElement(n.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Last Name")),a.createElement(n.A,{xs:4,className:"position-relative"},a.createElement("input",A({},r,{name:"lastName",type:"text",placeholder:"Last Name",id:t.error&&t.touched?"isError":"lastName",className:t.error&&t.touched?"form-control border-danger":"form-control",disabled:!!(R&&_&&C),"data-cy":"lastName"})),a.createElement(E.mo,{css:"input-box-info-icon",position:"right",message:g.Nz.MESSAGE.lastNameValidationMsg}),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error)))})),a.createElement(o.D0,{name:"emailAddress"},(e=>{var{input:r,meta:t}=e;return a.createElement(s.A,{className:"form-group"},a.createElement(n.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Email Address")),a.createElement(n.A,{xs:4,className:"position-relative"},a.createElement("input",A({},r,{name:"emailAddress",type:"email",placeholder:"Email Address",id:t.error&&t.touched?"isError":"emailAddress",className:t.error&&t.touched?"form-control border-danger":"form-control",disabled:!!(R&&_&&C),"data-cy":"emailAddress"})),a.createElement(E.mo,{css:"input-box-info-icon",position:"right",message:g.Nz.MESSAGE.emailvalidationinfomessage}),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error)))})),a.createElement(s.A,{className:"form-group"},a.createElement(n.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Select Role *")),a.createElement(n.A,{xs:4},a.createElement(o.D0,{name:"userRoleList",className:"form-control",render:e=>{var{input:r}=e;return a.createElement(m.Ay,A({},r,{id:"userRoleList","data-cy":"userRoleList",options:z(),onChange:e=>((e,r)=>{R&&_&&_.userSource==u.zO.USER_EXTERNAL.value&&e.label!=r.value.label&&(p.oR.dismiss(j.current),j.current=p.oR.warning((0,g.x3)(null==_?void 0:_.name))),r.onChange(e)})(e,r),isDisabled:M()}))}}))),a.createElement(s.A,{className:"form-group"},a.createElement(n.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Group")),a.createElement(n.A,{xs:4},a.createElement(o.D0,{name:"groupIdList",component:k,className:"form-control"}))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-12 "},a.createElement("p",{className:"form-header mg-0"},"Sync Details :"),a.createElement("div",{className:"wrap"},a.createElement(b.l,{syncDetails:_&&_.otherAttributes?JSON.parse(_.otherAttributes):{}})))),a.createElement("div",{className:"row form-actions"},a.createElement("div",{className:"col-md-9 offset-md-3"},a.createElement(l.A,{variant:"primary",onClick:()=>{if(f){var e=document.getElementById("isError")||document.getElementById(Object.keys(N)[0])||document.querySelector("input[name=".concat(Object.keys(N)[0],"]"))||document.querySelector("input[id=".concat(Object.keys(N)[0],"]"))||document.querySelector('span[className="invalid-field"]');(0,i.Nc)(e)}r(d)},size:"sm",disabled:c,"data-id":"save","data-cy":"save"},"Save"),a.createElement(l.A,{variant:"secondary",type:"button",size:"sm",onClick:()=>{t.reset,U(!0),y("/users/usertab")},"data-id":"cancel","data-cy":"cancel"},"Cancel")))))}}),a.createElement(i.Yh,{isUiBlock:I}))}}}]);