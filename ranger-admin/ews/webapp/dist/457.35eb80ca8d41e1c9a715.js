"use strict";(self.webpackChunkranger=self.webpackChunkranger||[]).push([[457],{7457:(e,r,t)=>{t.r(r),t.d(r,{default:()=>S});var a=t(6540),n=t(5056),s=t(5265),o=t(4479),c=t(1105),l=t(5615),i=t(952),u=t(5153),d=t(5787),m=t(3267),f=t(1376),E=t(6474),p=t(8106),w=t(2543),v=t(3666);function h(){return h=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},h.apply(this,arguments)}function b(e,r,t,a,n,s,o){try{var c=e[s](o),l=c.value}catch(e){return void t(e)}c.done?r(l):Promise.resolve(l).then(a,n)}function y(e){return function(){var r=this,t=arguments;return new Promise((function(a,n){var s=e.apply(r,t);function o(e){b(s,a,n,o,c,"next",e)}function c(e){b(s,a,n,o,c,"throw",e)}o(void 0)}))}}function P(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?P(Object(t),!0).forEach((function(r){A(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function A(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var O={userInfo:{},loader:!0},N=(e,r)=>{switch(r.type){case"SET_LOADER":return g(g({},e),{},{loader:r.loader});case"SET_USER_DATA":return g(g({},e),{},{userInfo:r.userInfo,loader:r.loader});default:throw new Error}};const S=function(){var e=(0,p.g)(),[r,t]=(0,a.useReducer)(N,O),{userInfo:b,loader:P}=r,A=(0,p.Zp)();(0,a.useEffect)((()=>{null!=e&&e.userID?S(e.userID):t({type:"SET_LOADER",loader:!1})}),[]);var S=function(){var e=y((function*(e){var r,a;try{a=yield(0,m.fetchApi)({url:"xusers/secure/users/"+e})}catch(e){console.error("Error occurred while fetching Users or CSRF headers! ".concat(e))}t({type:"SET_USER_DATA",userInfo:null===(r=a)||void 0===r?void 0:r.data,loader:!1})}));return function(r){return e.apply(this,arguments)}}(),D=function(){var r=y((function*(r){var t={};t.password=r.newPassword,t=g(g({},b),t);try{yield(0,m.fetchApi)({url:"xusers/secure/users/".concat(e.userID),method:"PUT",data:t}),E.oR.success("User password change successfully!!"),A("/users/usertab")}catch(e){E.oR.error("Error occured while updating user details!"),console.error("Error occurred while updating user details! ".concat(e))}}));return function(e){return r.apply(this,arguments)}}();return P?a.createElement(d.aH,null):b.userSource==f.zO.USER_EXTERNAL.value||b.userSource==f.zO.USER_FEDERATED.value?a.createElement(a.Fragment,null,a.createElement("div",{className:"header-wraper"},a.createElement("h3",{className:"wrap-header bold"},"User Detail"),(0,v.zH)(["Users","UserEdit"],e.userID)),a.createElement(u.A,{isEditView:!0,userID:e.userID,userInfo:b})):a.createElement(a.Fragment,null,a.createElement("div",{className:"header-wraper"},a.createElement("h3",{className:"wrap-header bold"},"User Detail"),(0,v.zH)(["Users","UserEdit"],e.userID)),a.createElement("div",{className:"wrap"},a.createElement(n.A.Container,{transition:!1,defaultActiveKey:"edit-basic-info"},a.createElement(s.A,{variant:"tabs"},a.createElement(s.A.Item,null,a.createElement(s.A.Link,{eventKey:"edit-basic-info"},a.createElement("i",{className:"fa-fw fa fa-edit bigger-125"}),"Basic Info")),a.createElement(s.A.Item,null,a.createElement(s.A.Link,{eventKey:"edit-password"},a.createElement("i",{className:"fa-fw fa fa-key bigger-125"}),"Change Password"))),a.createElement("div",{className:"user-details"},a.createElement(n.A.Content,null,a.createElement(n.A.Pane,{eventKey:"edit-basic-info"},a.createElement(u.A,{isEditView:!0,userID:e.userID,userInfo:b}))),a.createElement(n.A.Content,null,a.createElement(n.A.Pane,{eventKey:"edit-password"},a.createElement(a.Fragment,null,a.createElement(i.lV,{onSubmit:D,validate:e=>{var r={};return e.newPassword?f.hp.PASSWORD.regexExpression.test(e.newPassword)||(r.newPassword=f.hp.PASSWORD.message):r.newPassword="Required",e.reEnterPassword?(0,w.has)(e,"newPassword")&&e.newPassword!==e.reEnterPassword&&(r.reEnterPassword="Password must be match with new password"):r.reEnterPassword="Required",r},render:e=>{var{handleSubmit:r,form:t,submitting:n,invalid:s,errors:u}=e;return a.createElement("div",{className:"wrap"},a.createElement("form",{onSubmit:e=>{if(s){var t=document.getElementById("isError")||document.querySelector("input[name=".concat(Object.keys(u)[0],"]"));(0,d.Nc)(t)}r(e)}},a.createElement(i.D0,{name:"newPassword"},(e=>{var{input:r,meta:t}=e;return a.createElement(o.A,{className:"form-group"},a.createElement(c.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"New Password *")),a.createElement(c.A,{xs:4,className:"position-relative"},a.createElement("input",h({},r,{type:"password",autoComplete:"off",name:"newPassword",placeholder:"New Password",id:t.error&&t.touched?"isError":"newPassword",className:t.error&&t.touched?"form-control border-danger":"form-control","data-cy":"newPassword"})),a.createElement(v.mo,{css:"input-box-info-icon",position:"right",message:a.createElement("p",{className:"pd-10 mb-0",style:{fontSize:"small"}},f.hp.PASSWORD.message)}),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error)))})),a.createElement(i.D0,{name:"reEnterPassword"},(e=>{var{input:r,meta:t}=e;return a.createElement(o.A,{className:"form-group"},a.createElement(c.A,{xs:3},a.createElement("label",{className:"form-label float-end"},"Password Confirm *")),a.createElement(c.A,{xs:4,className:"position-relative"},a.createElement("input",h({},r,{name:"reEnterPassword",autoComplete:"off",type:"password",placeholder:"Re-enter New Password",id:t.error&&t.touched?"isError":"reEnterPassword",className:t.error&&t.touched?"form-control border-danger":"form-control","data-cy":"reEnterPassword"})),a.createElement(v.mo,{css:"input-box-info-icon",position:"right",message:a.createElement("p",{className:"pd-10 mb-0",style:{fontSize:"small"}},f.hp.PASSWORD.message)}),t.error&&t.touched&&a.createElement("span",{className:"invalid-field"},t.error)))})),a.createElement("div",{className:"row form-actions"},a.createElement("div",{className:"col-md-9 offset-md-3"},a.createElement(l.A,{variant:"primary",type:"submit",disabled:n,size:"sm","data-id":"save","data-cy":"save"},"Save"),a.createElement(l.A,{variant:"secondary",type:"button",onClick:()=>{t.reset,A("/users/usertab")},size:"sm","data-id":"save","data-cy":"save"},"Cancel")))))}}))))))))}}}]);