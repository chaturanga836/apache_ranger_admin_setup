/*! For license information please see 584.3a85f4aa6c2f6fcac703.js.LICENSE.txt */
"use strict";(self.webpackChunkranger=self.webpackChunkranger||[]).push([[584],{2885:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(6540),n=a(8106);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(this,arguments)}const l=e=>t=>{var a=(0,n.zy)(),l=(0,n.Zp)(),i=(0,n.g)();return r.createElement(e,s({navigate:l,location:a,params:i},t))}},3272:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(6540),n=a(2465),s=a(952),l=a(5615),i=a(9007);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o.apply(this,arguments)}function c(e){var{serviceDetails:t,serviceCompDetails:a,modelState:c,handleClose:m,handleSave:d}=e;return c.data?r.createElement(r.Fragment,null,r.createElement(n.A,{show:c.showModalResource,onHide:m,size:"xl","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.createElement(s.lV,{onSubmit:e=>{c.data=e,d()},initialValues:c.data,render:e=>{var{handleSubmit:c,values:d}=e;return r.createElement("form",{onSubmit:c},r.createElement(n.A.Header,{closeButton:!0},r.createElement(n.A.Title,null,"Resource Details")),r.createElement(n.A.Body,null,r.createElement(s.D0,{name:"resources"},(e=>r.createElement("div",{className:"wrap"},r.createElement(i.A,o({},e,{serviceDetails:t,serviceCompDetails:a,formValues:d,policyType:0,isMultiResources:!1})))))),r.createElement(n.A.Footer,null,r.createElement(l.A,{variant:"secondary",size:"sm",onClick:m},"Close"),r.createElement(l.A,{title:"Save",size:"sm",type:"submit"},"Save")))}}))):null}},4909:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var r=a(6540),n=a(4479),s=a(1105),l=a(2431),i=a(5615),o=a(2465),c=a(952),m=a(6474),d=a(924),u=a(3088),v=a(6005),p=a(8539),f=a(1376),h=a(3267),g=a(7744),E=a(6963),y=a(5787);const b=e=>{var{actionValues:t,creatableOnChange:a}=e,[n,s]=(0,r.useState)(t),[l,i]=(0,r.useState)(""),o=(0,r.useRef)(t);(0,r.useEffect)((()=>{JSON.stringify(o)!==JSON.stringify(t)&&(o.current=t,s(o.current))}),[t]);var c=e=>({value:e,label:e});return r.createElement(E.A,{components:{DropdownIndicator:()=>null},menuIsOpen:!1,isClearable:!1,isMulti:!0,placeholder:"Type Operations Name",value:n,inputValue:l,onChange:e=>{return s(t=e),void a(t);var t},onInputChange:e=>{i(e)},onKeyDown:e=>(e=>{if(l)switch(e.key){case"Enter":case"Tab":i(""),s([...n,c(l)]),a([...n,c(l)]),e.preventDefault()}})(e),styles:y.eB})};var N=a(3272),A=a(2543),S=a(5564),O=a(3666);function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},D.apply(this,arguments)}function C(e){var{serviceDetails:t,serviceDefDetails:a,fetchUsersData:n,fetchGroupsData:s,fetchRolesData:o,addAuditFilter:m,formValues:d}=e,f=(0,r.useRef)(),h=(0,r.useRef)(),[E,C]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[x,I]=(0,r.useState)([]),[M,T]=(0,r.useState)(!1),[j,R]=(0,r.useState)(!1),[F,P]=(0,r.useState)(!1),[V,J]=(0,r.useState)({showModalResource:!1,resourceInput:null,data:{}}),U=()=>{J({showModalResource:!1,resourceInput:null,data:{}})},z=e=>(0,A.isEmpty)(e)?"fa fa-fw fa-plus":"fa fa-fw fa-pencil",B=()=>{var e;return null===(e=null==a?void 0:a.accessTypes)||void 0===e?void 0:e.map((e=>{var{label:t,name:a}=e;return{label:t,value:a}}))},L=["Is Audited","Access Result","Resources","Operations","Permissions","Users","Groups","Roles"," "];return r.createElement("div",{className:"table-responsive"},r.createElement(l.A,{bordered:!0,size:"sm",className:"mt-3 table-audit-filter text-center d-table"},r.createElement("thead",null,r.createElement("tr",null,L.map((e=>r.createElement("th",{key:e},e))))),r.createElement("tbody",{className:"drag-drop-wrap"},void 0!==d.auditFilters&&0===d.auditFilters.length&&r.createElement("tr",{className:"text-center"},r.createElement("td",{colSpan:L.length},"Click on below ",r.createElement("i",{className:"fa-fw fa fa-plus"}),"button to add audit filter !!")),r.createElement(u.ED,{name:"auditFilters"},(e=>{var{fields:t}=e;return t.map(((e,l)=>r.createElement("tr",{key:e,onDragStart:e=>(0,O.bB)(e,l,f),onDragEnter:e=>(0,O.Nn)(e,l,h),onDragEnd:e=>(0,O.gv)(e,t,f,h),onDragOver:e=>(0,O.NQ)(e),draggable:!0,id:l},L.map((t=>"Is Audited"==t?r.createElement("td",{key:"".concat(e,".isAudited"),className:"align-middle"},r.createElement("div",{className:"d-flex"},r.createElement(c.D0,{className:"form-control audit-filter-select",name:"".concat(e,".isAudited"),component:"select",style:{minWidth:"75px"}},r.createElement("option",{value:"true"},"Yes"),r.createElement("option",{value:"false"},"No")))):"Access Result"==t?r.createElement("td",{key:t,className:"align-middle"},r.createElement(c.D0,{className:"form-control",name:"".concat(e,".accessResult")},(e=>{var{input:t}=e;return r.createElement("div",{style:{minWidth:"220px"}},r.createElement(v.Ay,D({},t,{menuPortalTarget:document.body,isClearable:!0,isSearchable:!1,options:[{value:"DENIED",label:"DENIED"},{value:"ALLOWED",label:"ALLOWED"},{value:"NOT_DETERMINED",label:"NOT_DETERMINED"}],menuPlacement:"auto",placeholder:"Select Access Result"})))}))):"Resources"==t?r.createElement("td",{key:"".concat(e,".resources"),className:"align-middle"},r.createElement(c.D0,{name:"".concat(e,".resources"),render:e=>{var t,{input:n}=e;return r.createElement(r.Fragment,null,r.createElement("div",{style:{minWidth:"195px"}},r.createElement("div",{className:"resource-group"},(t=n.value,(0,A.uniq)((0,A.map)(null==a?void 0:a.resources,"level")).map(((e,a)=>{if(void 0!==t["resourceName-".concat(e)]&&void 0!==t["value-".concat(e)]){var n=t["resourceName-".concat(e)].excludesSupported,s=t["resourceName-".concat(e)].recursiveSupported;return r.createElement("div",{className:"resource-filter",key:a},r.createElement("div",null,r.createElement("span",{className:"bold me-1"},t["resourceName-".concat(e)].name),":",r.createElement("span",{className:"ms-1"},(0,A.isArray)(t["value-".concat(e)])?(0,A.join)((0,A.map)(t["value-".concat(e)],"value"),", "):[t["value-".concat(e)].value])),r.createElement("div",null,n&&r.createElement("h6",{className:"text-center"},0==t["isExcludesSupport-".concat(e)]?r.createElement("span",{className:"badge bg-dark"},"Exclude"):r.createElement("span",{className:"badge bg-dark"},"Include")),s&&r.createElement("h6",{className:"text-center"},0==t["isRecursiveSupport-".concat(e)]?r.createElement("span",{className:"badge bg-dark"},"Non Recursive"):r.createElement("span",{className:"badge bg-dark"},"Recursive"))))}})))),r.createElement(i.A,{className:"me-1 btn-mini",variant:"primary",size:"sm",onClick:()=>(e=>{J({showModalResource:!0,resourceInput:e,data:(0,A.isEmpty)(e.value)?{}:e.value})})(n),"data-js":"serviceResource","data-cy":"serviceResource"},r.createElement("i",{className:z(n.value)})),r.createElement(i.A,{className:"me-1 btn-mini",variant:"danger",size:"sm",onClick:()=>(e=>{for(var t in e.value)delete e.value[t];J({showModalResource:!1,resourceInput:null,data:{}})})(n)},r.createElement("i",{className:"fa-fw fa fa-remove"}))))}})):"Operations"==t?r.createElement("td",{className:"mx-w-210 align-middle",key:"".concat(e,".actions"),width:"210px"},r.createElement(c.D0,{className:"form-control",name:"".concat(e,".actions")},(e=>{var{input:t}=e;return r.createElement(b,{actionValues:t.value,creatableOnChange:e=>((e,t)=>{t.onChange(e)})(e,t)})}))):"Permissions"==t?"tag"==(null==a?void 0:a.name)?r.createElement("td",{key:"".concat(e,".accessTypes"),className:"align-middle"},r.createElement(c.D0,{className:"form-control",name:"".concat(e,".accessTypes"),render:e=>{var{input:t}=e;return r.createElement(S.A,{options:B(),inputVal:t})}})):r.createElement("td",{key:"".concat(e,".accessTypes"),className:"align-middle"},r.createElement(c.D0,{className:"form-control",name:"".concat(e,".accessTypes"),render:e=>{var{input:t}=e;return r.createElement("div",{style:{minWidth:"100px"}},r.createElement(g.A,D({},t,{placement:"right",type:"checkbox",options:B(),showSelectAll:!0,selectAllLabel:"Select All"})))}})):"Roles"==t?r.createElement("td",{key:"".concat(e,".roles"),className:"align-middle"},r.createElement(c.D0,{className:"form-control",name:"".concat(e,".roles"),render:e=>{var{input:t}=e;return r.createElement("div",{style:{minWidth:"150px",maxWidth:"350px"}},r.createElement(p.A,D({},t,{menuPortalTarget:document.body,components:{IndicatorSeparator:()=>null},loadOptions:o,onFocus:()=>{T(!0),o().then((e=>{I(e),T(!1)}))},defaultOptions:x,isClearable:!1,noOptionsMessage:()=>M?"Loading...":"No options",menuPlacement:"auto",cacheOptions:!0,isMulti:!0,styles:y.eB,placeholder:"Select Roles"})))}})):"Groups"==t?r.createElement("td",{key:"".concat(e,".groups"),className:"align-middle"},r.createElement(c.D0,{className:"form-control",name:"".concat(e,".groups"),render:e=>{var{input:t}=e;return r.createElement("div",{style:{minWidth:"150px",maxWidth:"350px"}},r.createElement(p.A,D({},t,{menuPortalTarget:document.body,components:{IndicatorSeparator:()=>null},loadOptions:s,onFocus:()=>{R(!0),s().then((e=>{k(e),R(!1)}))},defaultOptions:w,isClearable:!1,noOptionsMessage:()=>j?"Loading...":"No options",menuPlacement:"auto",cacheOptions:!0,isMulti:!0,styles:y.eB,placeholder:"Select Groups"})))}})):"Users"==t?r.createElement("td",{key:"".concat(e,".users"),className:"align-middle"},r.createElement(c.D0,{className:"form-control",name:"".concat(e,".users"),render:e=>{var{input:t}=e;return r.createElement("div",{style:{minWidth:"150px",maxWidth:"350px"}},r.createElement(p.A,D({},t,{menuPortalTarget:document.body,components:{IndicatorSeparator:()=>null},loadOptions:n,onFocus:()=>{P(!0),n().then((e=>{C(e),P(!1)}))},defaultOptions:E,isClearable:!1,noOptionsMessage:()=>F?"Loading...":"No options",menuPlacement:"auto",cacheOptions:!0,isMulti:!0,styles:y.eB,placeholder:"Select Users"})))}})):void 0)),r.createElement("td",{key:"".concat(l,".remove"),className:"align-middle"},r.createElement(i.A,{variant:"danger",size:"sm",title:"Remove",onClick:()=>t.remove(l),"data-action":"delete","data-cy":"delete"},r.createElement("i",{className:"fa-fw fa fa-remove"}))))))})))),r.createElement(i.A,{variant:"outline-dark",size:"sm",className:"btn-sm",type:"button",onClick:()=>m("auditFilters",void 0),"data-action":"addGroup","data-cy":"addGroup",title:"Add"},r.createElement("i",{className:"fa-fw fa fa-plus"})),r.createElement(N.A,{serviceDetails:t,serviceCompDetails:a,cancelButtonText:"Cancel",actionButtonText:"Submit",handleSave:()=>{var e;e=V.data,V.resourceInput.onChange(e),U()},modelState:V,handleClose:U}))}function w(e,t,a,r,n,s,l){try{var i=e[s](l),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(r,n)}const k=function(e){var{formValues:t,getTestConnConfigs:a}=e,[n,s]=(0,r.useState)({showTestConnModal:!1,showMore:!0}),[l,c]=(0,r.useState)({showMoreModalContent:"",testConnModalContent:""}),m=()=>s({showTestConnModal:!1,showMore:!0}),d=e=>{s({showTestConnModal:!0,showMore:e})},u=function(){var e,n=(e=function*(){var e={},n="",l=[];try{var i=(e=yield(0,h.fetchApi)({url:"plugins/services/validateConfig",method:"post",data:a(t)})).data.msgDesc,o=e.data.statusCode,m=e.data.messageList;void 0!==o&&1===o?(n=[r.createElement("div",{className:"test-conn-content",key:"".concat(o,".msgContent")},r.createElement("b",null,"Connection Failed"),r.createElement("p",null,i))],void 0!==m&&1===m.length&&(l=[r.createElement("div",{className:"test-conn-content",key:"".concat(o,".msgList")},r.createElement("p",{className:"connection-error mt-2"},m[0].message))])):n=[r.createElement("div",{className:"test-conn-content",key:o},"Connected Successfully.")],s({showTestConnModal:!0,showMore:!0}),c({testConnModalContent:n,showMoreModalContent:l})}catch(e){var d,u;null!=e&&null!==(d=e.response)&&void 0!==d&&null!==(u=d.data)&&void 0!==u&&u.msgDesc&&(n=e.response.data.msgDesc),s({showTestConnModal:!0,showMore:!0}),c({testConnModalContent:n,showMoreModalContent:l}),console.error("Error occurred while validating the configs!  ".concat(e))}},function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function l(e){w(s,r,n,l,i,"next",e)}function i(e){w(s,r,n,l,i,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}();return r.createElement(r.Fragment,null,r.createElement(i.A,{variant:"outline-dark",size:"sm",className:"btn-sm",onClick:()=>{u()},"data-id":"testConn","data-cy":"testConn"},"Test Connection"),r.createElement(o.A,{show:n.showTestConnModal,onHide:m},r.createElement(o.A.Body,null,r.createElement("div",{className:"overflow-y-auto"},l.testConnModalContent,!n.showMore&&l.showMoreModalContent)),r.createElement(o.A.Footer,null,!(0,A.isEmpty)(l.showMoreModalContent)&&(n.showMore?r.createElement(i.A,{variant:"outline-primary",size:"sm",onClick:()=>{d(!1)}},"Show More.."):r.createElement(i.A,{variant:"outline-primary",size:"sm",onClick:()=>{d(!0)}},"Show Less..")),r.createElement(i.A,{variant:"primary",size:"sm",onClick:m},"OK"))))};var x=a(2885),I=a(4283),M=["input"],T=["input"];function j(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},R.apply(this,arguments)}function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){U(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function V(e,t,a,r,n,s,l){try{var i=e[s](l),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(r,n)}function J(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function l(e){V(s,r,n,l,i,"next",e)}function i(e){V(s,r,n,l,i,"throw",e)}l(void 0)}))}}function U(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class z extends r.Component{constructor(e){var t;super(e),t=this,U(this,"showDeleteModal",(()=>{this.setState({showDelete:!0})})),U(this,"hideDeleteModal",(()=>{this.setState({showDelete:!1})})),U(this,"onSubmit",function(){var e=J((function*(e){var a,r,n,s,l;void 0!==t.props.params.serviceId?(a=t.props.params.serviceId,r="put",n="plugins/services/".concat(a),s="updated",l="Error occurred while updating a service"):(r="post",n="plugins/services",s="created",l="Error occurred while creating a service!");try{var i,o;if(t.setState({blockUI:!0}),yield(0,h.fetchApi)({url:n,method:r,data:t.getServiceConfigsToSave(e)}),t.setState({blockUI:!1}),m.oR.success("Successfully ".concat(s," the service")),"services"!=(null===(i=t.props)||void 0===i||null===(o=i.location)||void 0===o?void 0:o.state)){var c,d,u,v;if(void 0===(null==t||null===(c=t.props)||void 0===c||null===(d=c.params)||void 0===d?void 0:d.serviceId))return t.props.navigate("tag"===(null===(u=t.state)||void 0===u||null===(v=u.serviceDef)||void 0===v?void 0:v.name)?"/policymanager/tag":"/policymanager/resource");t.props.navigate("/service/".concat(t.props.params.serviceId,"/policies/").concat(f.Kp.RANGER_ACCESS_POLICY_TYPE.value))}else{var p,g;t.props.navigate("tag"===(null===(p=t.state)||void 0===p||null===(g=p.serviceDef)||void 0===g?void 0:g.name)?"/policymanager/tag":"/policymanager/resource")}}catch(e){t.setState({blockUI:!1}),(0,O.ig)(e),console.error(l)}}));return function(t){return e.apply(this,arguments)}}()),U(this,"getServiceConfigsToSave",(e=>{var t,a,r,n={};for(var s in void 0!==this.props.params.serviceId&&(n.id=this.props.params.serviceId),n.name=null==e?void 0:e.name,n.displayName=null==e?void 0:e.displayName,n.description=null==e?void 0:e.description,n.type=null===(t=this.state)||void 0===t||null===(a=t.serviceDef)||void 0===a?void 0:a.name,n.tagService=null==(null==e?void 0:e.tagService)?"":e.tagService.value,n.isEnabled="true"===(null==e?void 0:e.isEnabled),n.configs={},null==e?void 0:e.configs)for(var l in this.configsJson)s===this.configsJson[l]&&(n.configs[l]=null==e?void 0:e.configs[s]);for(var i of f.md)i.name in n.configs&&(n.configs[i.name]=(0,A.join)((0,A.map)(n.configs[i.name],"value"),","));return void 0!==(null==e?void 0:e.customConfigs)&&(null===(r=e.customConfigs)||void 0===r||r.map((e=>{void 0!==(null==e?void 0:e.name)&&void 0!==(null==e?void 0:e.value)&&(n.configs[e.name]=e.value)}))),null!=e&&e.isAuditFilter?n.configs["ranger.plugin.audit.filters"]=this.getAuditFiltersToSave(e.auditFilters):n.configs["ranger.plugin.audit.filters"]="",P(P({},this.state.service),n)})),U(this,"getAuditFiltersToSave",(e=>{var t=[],a=this.state.serviceDef;return e.map((e=>{var r={};(0,A.isUndefined)(e)||(0,A.isEmpty)(e)||(Object.entries(e).map((e=>{var[t,n]=e;"isAudited"===t&&(r.isAudited="true"===n),"accessResult"!==t||(0,A.isEmpty)(n)||(r.accessResult=null==n?void 0:n.value),"resources"!==t||(0,A.isEmpty)(n)||(r.resources={},(0,A.uniq)((0,A.map)(a.resources,"level")).forEach((e=>{var t,s=null===(t=n["resourceName-".concat(e)])||void 0===t?void 0:t.name,l=n["value-".concat(e)],i=n["isRecursiveSupport-".concat(e)],o=n["isExcludesSupport-".concat(e)];if(s&&void 0!==l){var c=(0,A.find)(a.resources,{level:e,name:s});r.resources[s]={values:Array.isArray(l)?(0,A.map)(l,"value"):[l.value]},null!=c&&c.recursiveSupported&&(r.resources[s].isRecursive=void 0!==i?i:c.recursiveSupported),null!=c&&c.excludesSupported&&(r.resources[s].isExcludes=void 0!==o&&!o)}}))),"actions"===t&&(r.actions=(0,A.map)(n,"value")),"accessTypes"===t&&("tag"==a.name?r.accessTypes=(0,A.flatMap)((0,A.map)(n.tableList,"permission")):r.accessTypes=(0,A.map)(n,"value")),"users"===t&&(r.users=(0,A.map)(n,"value")),"groups"===t&&(r.groups=(0,A.map)(n,"value")),"roles"===t&&(r.roles=(0,A.map)(n,"value"))})),(0,A.has)(r,"isAudited")||(r.isAudited=!0),t.push(r))})),JSON.stringify(t).replace(/"/g,"'")})),U(this,"fetchServiceDef",(()=>{var e,t,a,r,n,s,l=this.initialValuesObj,i=this.props.params.serviceDefId;if(s=void 0!==(null===(e=n=this.serviceDefData.allServiceDefs.find((e=>e.id==i)))||void 0===e?void 0:e.name)&&"tag"===(null===(t=n)||void 0===t?void 0:t.name),(0,O.eb)(s),void 0!==(null===(a=n)||void 0===a?void 0:a.resources))for(var o of n.resources)void 0===this.props.params.serviceId&&void 0!==o.lookupSupported&&o.lookupSupported&&(o.lookupSupported=!1);var c,m=(0,A.find)(null===(r=n)||void 0===r?void 0:r.configs,{name:"ranger.plugin.audit.filters"});l.auditFilters=[],m&&void 0!==m&&void 0===this.props.params.serviceId&&(m=(0,A.isEmpty)(null===(c=m)||void 0===c?void 0:c.defaultValue)?[]:JSON.parse(m.defaultValue.replace(/'/g,'"')),l.isAuditFilter=m.length>0,l.auditFilters=this.getAuditFilters(m,n)),this.setState({serviceDef:n,createInitialValues:l,loader:void 0!==this.props.params.serviceId}),void 0!==this.props.params.serviceId&&this.fetchService()})),U(this,"fetchService",J((function*(){var e,a,r,n,s,l,i,o,c,m,d,u,v,p,g,E,y,b,N,S,O,D,C,w,k=t.props.params.serviceId;try{w=yield(0,h.fetchApi)({url:"plugins/services/".concat(k)})}catch(e){console.error("Error occurred while fetching Service or CSRF headers! ".concat(e))}var x={};x.name=null===(e=w)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.name,x.displayName=null===(r=w)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.displayName,x.description=null===(s=w)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.description,x.isEnabled=JSON.stringify(null===(i=w)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.isEnabled),x.tagService=void 0!==(null===(c=w)||void 0===c||null===(m=c.data)||void 0===m?void 0:m.tagService)?{value:null===(d=w)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.tagService,label:null===(v=w)||void 0===v||null===(p=v.data)||void 0===p?void 0:p.tagService}:null,x.configs={};var I=(0,A.map)(null===(g=t.state)||void 0===g||null===(E=g.serviceDef)||void 0===E?void 0:E.configs,"name"),M=(0,A.without)((0,A.difference)((0,A.keys)(null===(y=w)||void 0===y||null===(b=y.data)||void 0===b?void 0:b.configs),I),"ranger.plugin.audit.filters");I.map((e=>{var t,a,r;x.configs[e.replaceAll(".","_").replaceAll("-","_")]=null===(t=w)||void 0===t||null===(a=t.data)||void 0===a||null===(r=a.configs)||void 0===r?void 0:r[e]}));var T=(0,A.intersection)(M,(0,A.map)(f.md,"name"));T.map((e=>{var t,a;return{name:e,value:(0,A.map)((0,A.split)(null===(t=w)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.configs[e],","),(e=>({label:e,value:e})))}})).map((e=>{x.configs[e.name.replaceAll(".","_").replaceAll("-","_")]=e.value}));var j=(0,A.sortBy)(null===(N=(0,A.difference)(M,T))||void 0===N?void 0:N.map((e=>{var t,a;return{name:e,value:null===(t=w)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.configs[e]}})),"name");x.customConfigs=0==j.length?[void 0]:j;var R=null===(S=w)||void 0===S||null===(O=S.data)||void 0===O||null===(D=O.configs)||void 0===D?void 0:D["ranger.plugin.audit.filters"];x.auditFilters=[],R&&void 0!==R&&void 0!==t.props.params.serviceId&&(R=(0,A.isEmpty)(R)?[]:JSON.parse(R.replace(/'/g,'"')),x.isAuditFilter=R.length>0,x.auditFilters=t.getAuditFilters(R,t.state.serviceDef)),t.setState({service:null===(C=w)||void 0===C?void 0:C.data,editInitialValues:x,loader:!1})}))),U(this,"fetchTagService",function(){var e=J((function*(e){var t,a,r={serviceNamePartial:e||""},n=yield(0,h.fetchApi)({url:"plugins/services?serviceType=tag",params:r});return null===(a=null==n||null===(t=n.data)||void 0===t?void 0:t.services)||void 0===a?void 0:a.map((e=>({label:e.displayName,value:e.displayName})))}));return function(t){return e.apply(this,arguments)}}()),U(this,"onFocusTagService",(()=>{this.setState({loadingOptions:!0}),this.fetchTagService().then((e=>{this.setState({defaultTagOptions:e,loadingOptions:!1})}))})),U(this,"onFocusAdditionalConfigOptions",(e=>{this.setState({loadingAdditionalConfigOptions:!0}),"user"===e?this.fetchUsers().then((e=>{this.setState({defaultAdditionalUserConfigOptions:e,loadingAdditionalConfigOptions:!1})})):this.fetchGroups().then((e=>{this.setState({defaultAdditionalGroupConfigOptions:e,loadingAdditionalConfigOptions:!1})}))})),U(this,"deleteService",function(){var e=J((function*(e){t.hideDeleteModal();try{var a,r;t.setState({blockUI:!0}),yield(0,h.fetchApi)({url:"plugins/services/".concat(e),method:"delete"}),t.setState({blockUI:!1}),m.oR.success("Successfully deleted the service"),t.props.navigate("tag"===(null===(a=t.state)||void 0===a||null===(r=a.serviceDef)||void 0===r?void 0:r.name)?"/policymanager/tag":"/policymanager/resource")}catch(a){t.setState({blockUI:!1}),(0,O.ig)(a),console.error("Error occurred while deleting Service id - ".concat(e,"!  ").concat(a))}}));return function(t){return e.apply(this,arguments)}}()),U(this,"getAuditFilters",((e,t)=>{var a=[];return e.map((e=>{var r={};Object.entries(e).map((a=>{var[n,s]=a;if("isAudited"===n&&(r.isAudited=JSON.stringify(s)),"accessResult"===n&&(r.accessResult={value:s,label:s}),"resources"===n){var l,i;r.resources={};var o=[];null===(l=Object.entries(e.resources))||void 0===l||l.map((e=>{var a,[n,s]=e,l=(0,A.find)(null==t?void 0:t.resources,["name",n]);r.resources["resourceName-".concat(null==l?void 0:l.level)]=l,r.resources["value-".concat(null==l?void 0:l.level)]=null===(a=s.values)||void 0===a?void 0:a.map((e=>({label:e,value:e}))),null!=l&&l.excludesSupported&&(r.resources["isExcludesSupport-".concat(l.level)]=null==s||!s.isExcludes||!s.isExcludes),null!=l&&l.recursiveSupported&&(r.resources["isRecursiveSupport-".concat(l.level)]=0!=s.isRecursive),o.push({level:null==l?void 0:l.level,name:null==l?void 0:l.name})})),o=(0,A.maxBy)(o,"level");var c=(0,A.find)(null==t?void 0:t.resources,["parent",null===(i=o)||void 0===i?void 0:i.name]);c&&(r.resources["resourceName-".concat(c.level)]={label:"None",value:"none"})}if("actions"===n&&(r.actions=s.map((e=>({value:e,label:e})))),"accessTypes"===n)if("tag"==t.name){var m=(0,A.groupBy)(s,(function(e){return(0,A.split)(e,":",1)})),d={tableList:[]};Object.entries(m).map((e=>{var[t,a]=e;return d.tableList.push({serviceName:t,permission:a})})),r.accessTypes=d}else r.accessTypes=s.map((e=>({value:e,label:(0,A.find)(t.accessTypes,["name",e]).label})));"users"===n&&(r.users=s.map((e=>({value:e,label:e})))),"groups"===n&&(r.groups=s.map((e=>({value:e,label:e})))),"roles"===n&&(r.roles=s.map((e=>({value:e,label:e}))))})),a.push(r)})),a})),U(this,"getConfigInfo",(e=>{if(void 0!==e&&""!==e){var t=JSON.parse(e);return void 0!==t.info?[t.info]:[]}return[]})),U(this,"getAdditionalServiceConfigs",(()=>f.md.map(((e,t)=>(this.configsJson[e.name]=e.name.replaceAll(".","_").replaceAll("-","_"),r.createElement(n.A,{className:"form-group",key:this.configsJson[e.name]},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},e.label)),r.createElement(s.A,{xs:4},r.createElement(c.D0,{name:"configs."+this.configsJson[e.name],key:"configs."+e.name+t,id:"configs."+e.name,"data-cy":"configs."+e.name,component:this.AsyncSelectField,loadOptions:"user"==e.type?this.fetchUsers:this.fetchGroups,onFocus:()=>{this.onFocusAdditionalConfigOptions(e.type)},defaultOptions:"user"==e.type?this.state.defaultAdditionalUserConfigOptions:this.state.defaultAdditionalGroupConfigOptions,placeholder:"user"==e.type?"Select Users":"Select Groups",noOptionsMessage:()=>this.state.loadingAdditionalConfigOptions?"Loading...":"No options",isClearable:!0,styles:y.eB,isMulti:!0})))))))),U(this,"getServiceConfigs",(e=>{if(void 0!==(null==e?void 0:e.configs)){var t=[];return(0,A.reject)(e.configs,{name:"ranger.plugin.audit.filters"}).map((a=>{this.configsJson[a.name]=a.name.replaceAll(".","_").replaceAll("-","_"),this.initialValuesObj.configs[this.configsJson[a.name]]=a.defaultValue;var l=this.getConfigInfo(a.uiHint);switch(a.type){case"string":case"int":t.push(r.createElement(c.D0,{name:"configs."+this.configsJson[a.name],key:a.itemId,validate:this.validateRequired(a.mandatory)},(e=>{var{input:t,meta:i}=e;return r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},void 0!==a.label?a.label:a.name,a.mandatory?" * ":"")),r.createElement(s.A,{xs:4},r.createElement("input",R({},t,{type:"text",id:i.error&&i.touched?"isError":"configs."+this.configsJson[a.name],className:i.error&&i.touched?"form-control border-danger":"form-control","data-cy":"configs."+this.configsJson[a.name]}))),1===l.length&&r.createElement("span",{className:"col-5"},r.createElement(y.tZ,{title:"",content:l,placement:"right",icon:"fa-fw fa fa-info-circle",trigger:["hover","focus"],dangerousInnerHtml:!0})),i.error&&i.touched&&r.createElement("div",{className:"col-sm-6 offset-sm-3 invalid-field"},i.error))})));break;case"enum":var i=e.enums.find((e=>e.name==a.subType));t.push(r.createElement(c.D0,{name:"configs."+this.configsJson[a.name],key:a.itemId,validate:this.validateRequired(a.mandatory)},(e=>{var{input:t}=e;return r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},void 0!==a.label?a.label:a.name,a.mandatory?" * ":"")),r.createElement(s.A,{xs:4},r.createElement("select",R({},t,{id:"configs."+this.configsJson[a.name],className:"form-control form-select"}),this.enumOptions(i))),1===l.length&&r.createElement("span",{className:"d-inline"},r.createElement(y.tZ,{title:"",content:l,placement:"right",icon:"fa-fw fa fa-info-circle",trigger:["hover","focus"]})))})));break;case"bool":t.push(r.createElement(c.D0,{name:"configs."+this.configsJson[a.name],key:a.itemId,validate:this.validateRequired(a.mandatory)},(e=>{var{input:t}=e;return r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},void 0!==a.label?a.label:a.name,a.mandatory?" * ":"")),r.createElement(s.A,{xs:4},r.createElement("select",R({},t,{id:"configs."+this.configsJson[a.name],className:"form-control","data-js":"isAudited","data-cy":"isAudited"}),this.booleanOptions(a.subType))),1===l.length&&r.createElement("span",{className:"d-inline"},r.createElement(y.tZ,{title:"",content:l,placement:"right",icon:"fa-fw fa fa-info-circle",trigger:["hover","focus"]})))})));break;case"password":t.push(r.createElement(c.D0,{name:"configs."+this.configsJson[a.name],key:a.itemId,validate:this.validateRequired(a.mandatory)},(e=>{var{input:t,meta:i}=e;return r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},void 0!==a.label?a.label:a.name,a.mandatory?" * ":"")),r.createElement(s.A,{xs:4},r.createElement("input",R({},t,{type:"password",autoComplete:"off",id:i.error&&i.touched?"isError":"configs."+this.configsJson[a.name],className:i.error&&i.touched?"form-control border-danger":"form-control"}))),1===l.length&&r.createElement("span",{className:"d-inline"},r.createElement(y.tZ,{title:"",content:l,placement:"right",icon:"fa-fw fa fa-info-circle",trigger:["hover","focus"]})),i.error&&i.touched&&r.createElement("span",{className:"col-sm-6 offset-sm-3 invalid-field"},i.error))})))}})),t}})),U(this,"enumOptions",(e=>{var t=[];return e.elements.map((e=>{t.push(r.createElement("option",{value:e.name,key:e.name},e.label))})),t})),U(this,"booleanOptions",(e=>{var t=[],a=e.split(":");return(a=[a[0].substr(0,a[0].length-4),a[1].substr(0,a[1].length-5)]).map((e=>{t.push(r.createElement("option",{value:"Yes"===e,key:e},e))})),t})),U(this,"validateRequired",(e=>e?e=>e?void 0:"Required":()=>{})),U(this,"validateServiceName",(e=>f.hp.NAME_VALIDATION.regexforServiceNameValidation.test(e)?void 0:f.hp.NAME_VALIDATION.serviceNameValidationMessage)),U(this,"validateDisplayName",(e=>f.hp.NAME_VALIDATION.regexforNameValidation.test(e)?void 0:f.hp.NAME_VALIDATION.regexforNameValidationMessage)),U(this,"composeValidators",(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>t.reduce(((t,a)=>t||a(e)),void 0)})),U(this,"SelectField",(e=>{var{input:t}=e,a=j(e,M);return r.createElement(v.Ay,R({},t,a,{searchable:!0}))})),U(this,"AsyncSelectField",(e=>{var{input:t}=e,a=j(e,T);return r.createElement(p.A,R({},t,a,{cacheOptions:!0}))})),U(this,"fetchUsers",function(){var e=J((function*(e){var t={name:e||"",isVisible:1},a=[];try{var r;a=null===(r=(yield(0,h.fetchApi)({url:"xusers/lookup/users",params:t})).data)||void 0===r?void 0:r.vXStrings}catch(e){console.error("Error occurred while fetching Users ! ".concat(e))}return(0,A.map)(a,(function(e){return{value:e.value,label:e.value}}))}));return function(t){return e.apply(this,arguments)}}()),U(this,"fetchGroups",function(){var e=J((function*(e){var t={name:e||"",isVisible:1},a=[];try{var r;a=null===(r=(yield(0,h.fetchApi)({url:"xusers/lookup/groups",params:t})).data)||void 0===r?void 0:r.vXStrings}catch(e){console.error("Error occurred while fetching Groups ! ".concat(e))}return(0,A.map)(a,(function(e){return{label:e.value,value:e.value}}))}));return function(t){return e.apply(this,arguments)}}()),U(this,"fetchRoles",function(){var e=J((function*(e){var t={roleNamePartial:e||""},a=[];try{var r;a=null===(r=(yield(0,h.fetchApi)({url:"roles/roles",params:t})).data)||void 0===r?void 0:r.roles}catch(e){console.error("Error occurred while fetching Roles ! ".concat(e))}return(0,A.map)(a,(function(e){return{label:e.name,value:e.name}}))}));return function(t){return e.apply(this,arguments)}}()),U(this,"ServiceDefnBreadcrumb",(()=>{var e,t,a={};return a.serviceDefId=null===(e=this.state.serviceDef)||void 0===e?void 0:e.id,a.serviceId=this.props.params.serviceId,"tag"===(null===(t=this.state.serviceDef)||void 0===t?void 0:t.name)?(0,O.zH)(["TagBasedServiceManager",void 0!==this.props.params.serviceId?"ServiceEdit":"ServiceCreate"],a):(0,O.zH)(["ServiceManager",void 0!==this.props.params.serviceId?"ServiceEdit":"ServiceCreate"],a)})),this.serviceDefData=(0,A.cloneDeep)((0,I.Ji)()),this.configsJson={},this.initialValuesObj={isEnabled:"true",configs:{},customConfigs:[void 0],auditFilters:[]},this.state={serviceDef:{},service:{},editInitialValues:{},showDelete:!1,loader:!0,blockUI:!1,defaultTagOptions:[],loadingOptions:!1,defaultAdditionalUserConfigOptions:[],defaultAdditionalGroupConfigOptions:[],loadingAdditionalConfigOptions:!1}}componentDidMount(){if(null==this.serviceDefData.allServiceDefs.find((e=>e.id==this.props.params.serviceDefId)))return O.VJ.navigate("/pageNotFound");this.fetchServiceDef()}render(){return r.createElement(r.Fragment,null,r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"header-wraper"},r.createElement("h3",{className:"wrap-header bold"},void 0!==this.props.params.serviceId?"Edit":"Create"," ","Service"),this.ServiceDefnBreadcrumb())),this.state.loader?r.createElement(y.aH,null):r.createElement("div",{className:"wrap"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-12"},r.createElement(c.lV,{onSubmit:this.onSubmit,mutators:P({},d.A),initialValues:void 0!==this.props.params.serviceId?this.state.editInitialValues:this.state.createInitialValues,render:e=>{var t,a,m,d,{handleSubmit:v,submitting:p,values:h,invalid:g,errors:E,form:{mutators:{push:b}}}=e;return r.createElement("form",{onSubmit:e=>{var t;g&&(t=void 0!==(null==E?void 0:E.configs)?document.getElementById("isError")||document.querySelector("input[name=".concat(Object.keys(E)[0],"]"))||document.querySelector('input[name="configs.'.concat(Object.keys(E.configs)[0])):document.getElementById("isError")||document.querySelector("input[name=".concat(Object.keys(E)[0],"]")),(0,y.Nc)(t)),v(e)}},r.createElement(n.A,null,r.createElement(s.A,{xs:12},r.createElement("p",{className:"form-header"},"Service Details :"),r.createElement(c.D0,{name:"name",id:"name",validate:this.composeValidators(this.validateRequired(!0),this.validateServiceName)},(e=>{var{input:t,meta:a}=e;return r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},"Service Name *")),r.createElement(s.A,{xs:4},r.createElement("input",R({},t,{type:"text",id:a.error&&a.touched?"isError":"name",className:a.error&&a.touched?"form-control border-danger":"form-control","data-cy":"name"}))),a.error&&a.touched&&r.createElement("span",{className:"col-sm-6 offset-sm-3 invalid-field"},a.error))})),r.createElement(c.D0,{name:"displayName",validate:this.composeValidators(this.validateDisplayName)},(e=>{var{input:t,meta:a}=e;return r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},"Display Name")),r.createElement(s.A,{xs:4},r.createElement("input",R({},t,{type:"text",className:a.error&&a.touched?"form-control border border-danger":"form-control","data-cy":"displayName"}))),a.error&&a.touched&&r.createElement("span",{className:"col-sm-6 offset-sm-3 invalid-field"},a.error))})),r.createElement(c.D0,{name:"description"},(e=>{var{input:t,meta:a}=e;return r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},"Description")),r.createElement(s.A,{xs:4},r.createElement("textarea",R({},t,{className:a.error&&a.touched?"form-control border border-danger":"form-control","data-cy":"description"}))),a.error&&a.touched&&r.createElement("span",{className:"col-sm-6 offset-sm-3 invalid-field"},a.error))})),r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},"Active Status")),r.createElement(s.A,{xs:4},r.createElement("span",null,r.createElement("div",{className:"form-control border-0"},r.createElement("div",{className:"form-check-inline"},r.createElement(c.D0,{name:"isEnabled",component:"input",type:"radio",value:"true","data-cy":"isEnabled"})," Enabled"),r.createElement("div",{className:"form-check-inline"}," ",r.createElement(c.D0,{name:"isEnabled",component:"input",type:"radio",value:"false","data-cy":"isEnabled"})," Disabled"))))),"tag"!==(null===(t=this.state)||void 0===t||null===(a=t.serviceDef)||void 0===a?void 0:a.name)&&r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},"Tag Service")),r.createElement(s.A,{xs:4},r.createElement(c.D0,{name:"tagService",component:this.AsyncSelectField,loadOptions:this.fetchTagService,onFocus:()=>{this.onFocusTagService()},defaultOptions:this.state.defaultTagOptions,placeholder:"Select Tag Service",isLoading:this.state.loadingOptions,isClearable:!0,cacheOptions:!0,styles:y.eB}))))),r.createElement(n.A,null,r.createElement(s.A,{xs:12},r.createElement("p",{className:"form-header"},"Config Properties :"),this.getServiceConfigs(this.state.serviceDef),this.getAdditionalServiceConfigs(),r.createElement(n.A,{className:"form-group"},r.createElement(s.A,{xs:3},r.createElement("label",{className:"form-label float-end"},"Add New Custom Configurations")),r.createElement(s.A,{xs:5},r.createElement(l.A,{bordered:!0,size:"sm",className:"no-bg-color"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"text-center"},"Name"),r.createElement("th",{className:"text-center",colSpan:"2"},"Value"))),r.createElement("tbody",null,r.createElement(u.ED,{name:"customConfigs"},(e=>{var{fields:t}=e;return t.map(((e,a)=>r.createElement("tr",{key:e},r.createElement("td",{className:"text-center"},r.createElement(c.D0,{name:"".concat(e,".name"),component:"input",className:"form-control","data-js":"name","data-cy":"name"})),r.createElement("td",{className:"text-center"},r.createElement(c.D0,{name:"".concat(e,".value"),component:"input",className:"form-control","data-js":"value","data-cy":"value"})),r.createElement("td",{className:"text-center"},r.createElement(i.A,{variant:"danger",size:"sm",className:"btn-mini",title:"Remove",onClick:()=>t.remove(a),"data-action":"delete","data-cy":"delete"},r.createElement("i",{className:"fa-fw fa fa-remove"}))))))})))))),r.createElement(n.A,{className:"form-group"},r.createElement("div",{className:"col-sm-4 offset-sm-3"},r.createElement(i.A,{variant:"outline-dark",className:"btn-mini btn-sm",onClick:()=>b("customConfigs",void 0),"data-action":"addCustomConfigs","data-cy":"addCustomConfigs"},r.createElement("i",{className:"fa-fw fa fa-plus"})))))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-12"},r.createElement("div",{className:"form-group row form-header p-0"},r.createElement("label",{className:"col-sm-1 col-form-label form-check-label"},"Audit Filter :"),r.createElement("div",{className:"col-sm-10 mt-2"},r.createElement(c.D0,{name:"isAuditFilter",component:"input",type:"checkbox"}))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-sm-12"},r.createElement(y.kW,{when:"isAuditFilter",is:!0},r.createElement(C,{serviceDetails:this.state.service,serviceDefDetails:this.state.serviceDef,fetchUsersData:this.fetchUsers,fetchGroupsData:this.fetchGroups,fetchRolesData:this.fetchRoles,addAuditFilter:b,formValues:h})))),r.createElement("div",{className:"form-group row mt-2 text-end"},r.createElement("div",{className:"col-sm-3 col-form-label"},!(0,A.isEmpty)(this.state.serviceDef)&&r.createElement(k,{getTestConnConfigs:this.getServiceConfigsToSave,formValues:h}))))),r.createElement("div",{className:"row form-actions"},r.createElement("div",{className:"col-md-9 offset-md-3"},r.createElement(i.A,{variant:"primary",type:"submit",className:"btn-sm",size:"sm",disabled:p,"data-id":"save","data-cy":"save"},void 0!==this.props.params.serviceId?"Save":"Add"),r.createElement(i.A,{variant:"secondary",type:"button",className:"btn-sm",size:"sm",onClick:()=>{var e,t,a,r,n,s,l,i;return"services"!=(null===(e=this.props)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.state)?void 0!==(null==this||null===(a=this.props)||void 0===a||null===(r=a.params)||void 0===r?void 0:r.serviceId)?this.props.navigate("/service/".concat(this.props.params.serviceId,"/policies/").concat(f.Kp.RANGER_ACCESS_POLICY_TYPE.value)):this.props.navigate("tag"===(null===(n=this.state)||void 0===n||null===(s=n.serviceDef)||void 0===s?void 0:s.name)?"/policymanager/tag":"/policymanager/resource"):this.props.navigate("tag"===(null===(l=this.state)||void 0===l||null===(i=l.serviceDef)||void 0===i?void 0:i.name)?"/policymanager/tag":"/policymanager/resource")},"data-id":"cancel","data-cy":"cancel"},"Cancel"),void 0!==this.props.params.serviceId&&r.createElement(i.A,{variant:"danger",type:"button",className:"btn-sm",size:"sm",onClick:()=>{this.showDeleteModal()}},"Delete")),void 0!==this.props.params.serviceId&&r.createElement(o.A,{show:this.state.showDelete,onHide:this.hideDeleteModal},r.createElement(o.A.Header,{closeButton:!0},r.createElement("span",{className:"text-word-break"},'Are you sure want to delete service "',r.createElement("b",null,"".concat(null==this||null===(m=this.state)||void 0===m||null===(d=m.service)||void 0===d?void 0:d.displayName)),'" ?')),r.createElement(o.A.Footer,null,r.createElement(i.A,{variant:"secondary",size:"sm",title:"Cancel",onClick:this.hideDeleteModal},"Cancel"),r.createElement(i.A,{variant:"primary",size:"sm",title:"Yes",onClick:()=>this.deleteService(this.props.params.serviceId)},"Yes")))))}}))),r.createElement(y.Yh,{isUiBlock:this.state.blockUI})))}}const B=(0,x.A)(z)},5228:e=>{var t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var s,l,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var c in s=Object(arguments[o]))a.call(s,c)&&(i[c]=s[c]);if(t){l=t(s);for(var m=0;m<l.length;m++)r.call(s,l[m])&&(i[l[m]]=s[l[m]])}}return i}}}]);