"use strict";(self.webpackChunkranger=self.webpackChunkranger||[]).push([[89],{9089:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(6540),n=r(4479),l=r(1105),o=r(8651),c=r(9423),s=r(3666),i=r(5787),u=r(2543),m=r(3267),p=r(8281),d=r(4699);function f(e,t,r,a,n,l,o){try{var c=e[l](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(a,n)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=function(){var[e,t]=(0,a.useState)([]),[r,g]=(0,a.useState)(!0),[b,y]=(0,a.useState)(!0),[h,E]=a.useState(0),[w,N]=(0,a.useState)(0),O=(0,a.useRef)(0),[P]=(0,a.useState)((0,s.FV)()||(0,s.Xm)()),[S,j]=(0,a.useState)([]),[x,k]=(0,o.ok)(),[C,A]=(0,a.useState)([]);(0,a.useEffect)((()=>{var e={},t=[],r=Object.fromEntries([...x]);for(var a in r){var n=(0,u.find)(D,{urlLabel:a});if(!(0,u.isUndefined)(n)){var l=n.category,o=r[a];if("textoptions"==n.type){var c=(0,u.find)(n.options(),{label:o});o=void 0!==c?c.value:o}e[l]=o,t.push({category:l,value:o})}}k(v(v({},r),{}),{replace:!0}),JSON.stringify(S)!==JSON.stringify(e)&&j(e),A(t),y(!1)}),[x]);var H=(0,a.useCallback)(function(){var e,r=(e=function*(e){var{pageSize:r,pageIndex:a}=e;g(!0);var n=[],l=0,o=++O.current,c=v({},S);if(o===O.current){c.pageSize=r,c.startIndex=a*r;try{var s=yield(0,m.fetchApi)({url:"xusers/permission",params:c});n=s.data.vXModuleDef,l=s.data.totalCount}catch(e){console.error("Error occurred while fetching Group list! ".concat(e))}t(n),N(l),E(Math.ceil(l/r)),g(!1)}},function(){var t=this,r=arguments;return new Promise((function(a,n){var l=e.apply(t,r);function o(e){f(l,a,n,o,c,"next",e)}function c(e){f(l,a,n,o,c,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}(),[S]),L=a.useMemo((()=>[{Header:"Modules",accessor:"module",Cell:e=>e.value?P?a.createElement(o.N_,{className:"text-info",to:"/permissions/".concat(e.row.original.id,"/edit"),title:e.row.original.module},e.row.original.module):e.row.original.module:"--",width:80},{Header:"Groups",accessor:e=>{var t=e.groupPermList.map((e=>e.groupName));return(0,u.isEmpty)(t)?a.createElement("div",{className:"text-center"},"--"):a.createElement(i.LH,{data:t})}},{Header:"Users",accessor:e=>{var t=e.userPermList.map((e=>e.userName));return(0,u.isEmpty)(t)?a.createElement("div",{className:"text-center"},"--"):a.createElement(i.LH,{data:t})}},{Header:"Action",accessor:"action",Cell:e=>a.createElement("div",{className:"text-center"},a.createElement(o.N_,{className:"btn btn-sm m-r-5",title:"Edit",to:"/permissions/".concat(e.row.original.id,"/edit")},a.createElement("i",{className:"fa-fw fa fa-edit fa-fw fa fa-large"}))),width:50}]),[]),D=[{category:"groupName",label:"Group Name",urlLabel:"groupName",type:"text"},{category:"module",label:"Module Name",urlLabel:"moduleName",type:"text"},{category:"userName",label:"User Name",urlLabel:"userName",type:"text"}];return a.createElement(a.Fragment,null,a.createElement("div",{className:"header-wraper"},a.createElement("h3",{className:"wrap-header bold"},"Permissions"),a.createElement(d.A,null)),a.createElement("div",{className:"wrap"},b?a.createElement(i.aH,null):a.createElement(a.Fragment,null,a.createElement(n.A,{className:"mb-4"},a.createElement(l.A,{md:9},a.createElement(p.A,{key:"permission-listing-search-filter",placeholder:"Search for permissions...",options:(0,u.sortBy)(D,["label"]),onChange:e=>{var{searchFilterParam:t,searchParam:r}=(0,s.kI)(e,D);j(t),k(r,{replace:!0})},defaultSelected:C}))),a.createElement(c.A,{data:e,columns:P?L:(0,u.reject)(L,["Header","Action"]),totalCount:w,loading:r,fetchData:H,pageCount:h}))))}}}]);