"use strict";(self.webpackChunkranger=self.webpackChunkranger||[]).push([[744],{8725:(e,t,a)=>{a.d(t,{l:()=>c});var r=a(6540),l=a(2431),n=a(1376),s=a(9828);function c(e){return 0==Object.keys(e.syncDetails).length?r.createElement(r.Fragment,null,r.createElement(l.A,{bordered:!0,size:"sm"},r.createElement("thead",{className:"thead-light"},r.createElement("tr",null,r.createElement("th",{className:" text-center"},"Name"),r.createElement("th",{className:" text-center"},"Value"))),r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{className:"text-center text-muted",colSpan:"2"},"No Sync Details Found!!"))))):r.createElement(r.Fragment,null,r.createElement(l.A,{bordered:!0,size:"sm"},r.createElement("thead",{className:"thead-light"},r.createElement("tr",null,r.createElement("th",{className:" text-center"},"Name"),r.createElement("th",{className:" text-center"},"Value"))),r.createElement("tbody",null,Object.entries(e.syncDetails).map((e=>{var[t,a]=e;return r.createElement("tr",{key:t},r.createElement("td",null,n.im[t]?n.im[t]:t),r.createElement("td",null,a?"syncTime"==t||"lastModified"==t?(0,s.Ay)(a,"mm/dd/yyyy hh:MM:ss TT"):a:"--"))})))))}},744:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var r=a(6540),l=a(6052),n=a(4479),s=a(1105),c=a(5615),o=a(1461),i=a(4062),u=a(2465),m=a(9423),d=a(1376),p=a(8106),g=a(8651),v=a(4743),E=a.n(v),h=a(3267),y=a(6474),f=a(8725),b=a(2735),S=a(3666),w=a(5787),A=a(2543);function N(e,t,a,r,l,n,s){try{var c=e[n](s),o=c.value}catch(e){return void a(e)}c.done?t(o):Promise.resolve(o).then(r,l)}const D=function(e){var t,{groupID:a}=e,[l,o]=(0,r.useState)([]),[i,u]=(0,r.useState)({searchUser:null,usrData:[]}),[m,d]=(0,r.useState)({modalLoader:!0,contentLoader:!1}),[p,g]=(0,r.useState)(!1),[v,E]=(0,r.useState)(null),f=(0,r.useRef)(null);(0,r.useEffect)((()=>{D()}),[p]);var D=function(){var e,t=(e=function*(){var e;try{e=yield(0,h.fetchApi)({url:"xusers/".concat(a,"/users"),method:"GET",params:{pageSize:v||100,startIndex:0}})}catch(e){(0,S.ig)(e),console.error(e)}var t=(0,A.map)(e.data.vXUsers,(function(e){return{value:e.name,id:e.id}}));if(o(t),void 0!==(null==i?void 0:i.searchUser)&&null!==(null==i?void 0:i.searchUser)){var r=t.filter((e=>e.value.toLowerCase().includes(null==i?void 0:i.searchUser.toLowerCase())));u({usrData:r})}else u({usrData:t});E(e.data.totalCount),d({modalLoader:!1,contentLoader:!1})},function(){var t=this,a=arguments;return new Promise((function(r,l){var n=e.apply(t,a);function s(e){N(n,r,l,s,c,"next",e)}function c(e){N(n,r,l,s,c,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}();return m.modalLoader?r.createElement(w.VI,null):r.createElement(r.Fragment,null,l&&l.length>0?r.createElement(r.Fragment,null,v>100&&r.createElement(b.A,{variant:"warning"},"Initially search filter is applied for first hundred users. To get more users click on"," ",r.createElement(c.A,{variant:"outline-secondary",size:"sm",className:"".concat(p?"not-allowed":""," ms-2 btn-mini"),onClick:()=>{g(!0),d({modalLoader:!1,contentLoader:!0})},"data-id":"Show All Users","data-cy":"Show All Users",title:"Show All Users",disabled:!!p},"Show All Users")),r.createElement(n.A,{className:"mb-2"},r.createElement(s.A,{className:"col-sm-11"},r.createElement("input",{className:"form-control",type:"text",onChange:e=>{var t=l.filter((t=>t.value.toLowerCase().includes(e.currentTarget.value.toLowerCase())));u({searchUser:e.currentTarget.value,usrData:t})},placeholder:"Search","data-id":"userInput","data-cy":"userInput"})),r.createElement(s.A,{className:"col-sm-1"},r.createElement(c.A,{className:"me-2 rounded-pill border",size:"sm",variant:"link",onClick:()=>{return navigator.clipboard.writeText((0==(e=null==i?void 0:i.usrData.map((e=>e.value)).join(" | ")).length?(y.oR.dismiss(f.current),f.current=y.oR.warning("No user list find for copy")):(y.oR.dismiss(f.current),f.current=y.oR.success("User list copied successfully!!")),e));var e},title:"Copy All Users Name"},r.createElement("i",{className:"fa-fw fa fa-copy"}," ")))),r.createElement(n.A,null,r.createElement(s.A,null,m.contentLoader?r.createElement(w.VI,null):(null==i||null===(t=i.usrData)||void 0===t?void 0:t.length)>0?null==i?void 0:i.usrData.map(((e,t)=>r.createElement(c.A,{variant:"link",href:"#/user/".concat(e.id),size:"sm",className:"me-2 mb-2 rounded-pill border text-truncate more-less-width ".concat((0,S.Dl)()||(0,S.EH)()?"disabled-link text-secondary":""),title:e.value,key:t},e.value))):"No users found."))):r.createElement(r.Fragment,null,r.createElement("center",{className:"text-muted"},"No user associate with this group.!!")))};var x=a(8281);function P(e,t,a,r,l,n,s){try{var c=e[n](s),o=c.value}catch(e){return void a(e)}c.done?t(o):Promise.resolve(o).then(r,l)}function L(e){return function(){var t=this,a=arguments;return new Promise((function(r,l){var n=e.apply(t,a);function s(e){P(n,r,l,s,c,"next",e)}function c(e){P(n,r,l,s,c,"throw",e)}s(void 0)}))}}function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){C(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const O=function(){var e=(0,p.Zp)(),{state:t}=(0,p.zy)(),[a,v]=(0,r.useState)([]),[b,N]=(0,r.useState)(!0),[P,U]=(0,r.useState)(0),C=(0,r.useRef)(0),O=(0,r.useRef)([]),R=(0,r.useRef)(null),[I,z]=(0,r.useState)(!1),[G,T]=(0,r.useState)(E().now()),[V,H]=(0,r.useState)({syncDteails:{},showSyncDetails:!1}),[j,F]=(0,r.useState)(!1),[_,B]=(0,r.useState)(t&&t.showLastPage?t.addPageData.totalPage:0),[K,M]=(0,r.useState)(t&&t.showLastPage?t.addPageData.totalPage-1:0),[X,J]=(0,r.useState)(t&&t.showLastPage?t.addPageData.pageSize:25),[W,Y]=(0,r.useState)({page:0}),[Z,q]=(0,r.useState)({totalPage:0,pageRecords:0,pageSize:25}),[Q,$]=(0,r.useState)([]),[ee,te]=(0,g.ok)(),[ae,re]=(0,r.useState)([]),[le,ne]=(0,r.useState)(!0),[se,ce]=(0,r.useState)(!1);(0,r.useEffect)((()=>{var e={},a=[],r=Object.fromEntries([...ee]);for(var l in r){var n=(0,A.find)(he,{urlLabel:l});if(!(0,A.isUndefined)(n)){var s=n.category,c=r[l];if("textoptions"==n.type){var o=(0,A.find)(n.options(),{label:c});c=void 0!==o?o.value:c}e[s]=c,a.push({category:s,value:c})}}te(k(k({},r),{}),{replace:!0}),JSON.stringify(Q)!==JSON.stringify(e)&&$(e),re(a),ne(!1),localStorage.setItem("newDataAdded",t&&t.showLastPage)}),[ee]),(0,r.useEffect)((()=>{"true"==localStorage.getItem("newDataAdded")&&(0,w.r7)(a)}),[P]);var oe=(0,r.useCallback)(function(){var e=L((function*(e){var{pageSize:a,pageIndex:r,gotoPage:l}=e;N(!0);var n=[],s=[],c=0,o=t&&t.showLastPage?t.addPageData.totalPage-1:r,i=0,u=++C.current,m=k({},Q);if(u===C.current){m.page=o,m.startIndex=t&&t.showLastPage?(t.addPageData.totalPage-1)*a:r*a,m.pageSize=a;try{n=(s=yield(0,h.fetchApi)({url:"xusers/groups",params:m})).data.vXGroups,c=s.data.totalCount,i=Math.ceil(c/a)}catch(e){(0,S.ig)(e),console.error("Error occurred while fetching User list! ".concat(e))}t&&(t.showLastPage=!1),v(n),q({totalPage:i,pageRecords:s&&s.data&&s.data.totalCount,pageSize:a}),U(c),B(i),M(o),J(a),Y({page:l}),N(!1)}}));return function(t){return e.apply(this,arguments)}}(),[G,Q]),ie=()=>{z((e=>!e))},ue=function(){var e=L((function*(){var e=O.current,t="";if(e.length>0){for(var{original:r}of(ie(),e))try{ce(!0),yield(0,h.fetchApi)({url:"xusers/secure/groups/id/".concat(r.id),method:"DELETE",params:{forceDelete:!0}}),ce(!1)}catch(e){var l,n;ce(!1),null!=e&&null!==(l=e.response)&&void 0!==l&&null!==(n=l.data)&&void 0!==n&&n.msgDesc?t+=e.response.data.msgDesc+"\n":t+="Error occurred during deleting Groups: ".concat(r.name)+"\n",console.error(t)}t?(y.oR.dismiss(R.current),R.current=y.oR.error(t)):(y.oR.dismiss(R.current),R.current=y.oR.success("Group deleted successfully!"),(1==a.length||a.length==O.current.length)&&K>0?"function"==typeof(null==W?void 0:W.page)&&W.page(0):T(E().now()))}}));return function(){return e.apply(this,arguments)}}(),me=function(){var e=L((function*(e){if(O.current.length>0){var t=O.current,a={};for(var{original:r}of t)r.isVisible!=e&&(a[r.id]=e);if((0,A.isEmpty)(a))return y.oR.dismiss(R.current),void(R.current=y.oR.warning(e==d.zE.STATUS_VISIBLE.value?"Selected ".concat(1===O.current.length?"Group is":"Groups are"," already visible"):"Selected ".concat(1===O.current.length?"Group is ":"Groups are"," already hidden")));try{yield(0,h.fetchApi)({url:"xusers/secure/groups/visibility",method:"PUT",data:a}),y.oR.dismiss(R.current),R.current=y.oR.success("Sucessfully updated ".concat(1===O.current.length?"Group":"Groups"," visibility!!")),T(E().now())}catch(e){(0,S.ig)(e),console.error("Error occurred during set Group visibility! ".concat(e))}}else y.oR.dismiss(R.current),R.current=y.oR.warning("Please select atleast one group!!")}));return function(t){return e.apply(this,arguments)}}(),de=r.useMemo((()=>[{Header:"Group Name",accessor:"name",Cell:e=>e.value?r.createElement(g.N_,{style:{maxWidth:"100%",display:"inline-block"},className:"text-truncate ".concat((0,S.Dl)()||(0,S.EH)()?"disabled-link text-secondary":"text-info"),to:"/group/"+e.row.original.id,title:e.value},e.value):"--"},{Header:"Group Source",accessor:"groupSource",Cell:e=>null!==e.value&&void 0!==e.value?e.value==d.hg.XA_PORTAL_GROUP.value?r.createElement("div",{className:"text-center"},r.createElement("h6",null,r.createElement(l.A,{bg:"success"},d.HD.GROUP_INTERNAL.label))):r.createElement("div",{className:"text-center"},r.createElement("h6",null,r.createElement(l.A,{bg:"warning"},d.HD.GROUP_EXTERNAL.label))):r.createElement("div",{className:"text-center"},"--"),width:100},{Header:"Sync Source",accessor:"syncSource",Cell:e=>e.value?r.createElement("div",{className:"text-center"},r.createElement("h6",null,r.createElement(l.A,{bg:"success"},e.value," "))):r.createElement("div",{className:"text-center"},"--"),width:100},{Header:"Visibility",accessor:"isVisible",Cell:e=>e?e.value==d.zE.STATUS_VISIBLE.value?r.createElement("div",{className:"text-center"},r.createElement("h6",null,r.createElement(l.A,{bg:"success"},d.zE.STATUS_VISIBLE.label))):r.createElement("div",{className:"text-center"},r.createElement("h6",null,r.createElement(l.A,{bg:"info"},d.zE.STATUS_HIDDEN.label))):r.createElement("div",{className:"text-center"},"--"),width:100},{Header:"Users",accessor:"member",Cell:e=>r.createElement("div",{className:"text-center"},r.createElement("button",{className:"btn btn-outline-dark btn-sm",title:"View Users","data-js":"showUserList",onClick:()=>{ve(e.row.original)},"data-cy":"showUserList"},r.createElement("i",{className:"fa-fw fa fa-group"}," "))),width:80},{Header:"Sync Details",accessor:"otherAttributes",Cell:(e,t)=>e.value?r.createElement("div",{className:"text-center"},r.createElement("button",{className:"btn btn-outline-dark btn-sm","data-id":"syncDetailes","data-cy":"syncDetailes","data-for":"group",title:"Sync Details",id:t.id,onClick:()=>{pe(e.value)}},r.createElement("i",{className:"fa-fw fa fa-eye"}," "))):r.createElement("div",{className:"text-center"},"--"),width:80}]),[]),pe=e=>{H({syncDteails:JSON.parse(e),showSyncDetails:!0})},ge=()=>{H({syncDteails:{},showSyncDetails:!1})},ve=e=>{F({groupID:e.id,groupName:e.name,showAssociateUserDetails:!0})},Ee=()=>{F({groupID:"",showAssociateUserDetails:!1})},he=[{category:"name",label:"Group Name",urlLabel:"groupName",type:"text"},{category:"groupSource",label:"Group Source",urlLabel:"groupSource",type:"textoptions",options:()=>[{value:"0",label:"Internal"},{value:"1",label:"External"}]},{category:"syncSource",label:"Sync Source",urlLabel:"syncSource",type:"textoptions",options:()=>[{value:"File",label:"File"},{value:"LDAP/AD",label:"LDAP/AD"},{value:"Unix",label:"Unix"}]},{category:"isVisible",label:"Visibility",urlLabel:"visibility",type:"textoptions",options:()=>[{value:"0",label:"Hidden"},{value:"1",label:"Visible"}]}];return r.createElement("div",{className:"wrap"},le?r.createElement(w.aH,null):r.createElement(r.Fragment,null,r.createElement(w.Yh,{isUiBlock:se}),r.createElement(n.A,{className:"mb-4"},r.createElement(s.A,{md:8,className:"usr-grp-role-search-width"},r.createElement(x.A,{key:"user-listing-search-filter",placeholder:"Search for your groups...",options:he,onChange:e=>{var{searchFilterParam:t,searchParam:a}=(0,S.kI)(e,he);$(t),te(a,{replace:!0}),"function"==typeof(null==W?void 0:W.page)&&W.page(0)},defaultSelected:ae})),(0,S.FV)()&&r.createElement(s.A,{md:4,className:"text-end"},r.createElement(c.A,{variant:"primary",size:"sm",onClick:()=>{e("/group/create",{state:{tblpageData:Z}})},"data-id":"addNewGroup","data-cy":"addNewGroup"},"Add New Group"),r.createElement(o.A,{title:"Set Visibility",size:"sm",className:"ms-2 d-inline-block manage-visibility",onSelect:me,"data-id":"hideShowVisibility","data-cy":"hideShowVisibility"},r.createElement(i.A.Item,{eventKey:"1"},"Visible"),r.createElement(i.A.Item,{eventKey:"0"},"Hidden")),r.createElement(c.A,{variant:"danger",size:"sm",title:"Delete",className:"ms-2",onClick:()=>{O.current.length>0?ie():(y.oR.dismiss(R.current),R.current=y.oR.warning("Please select atleast one group!!"))},"data-id":"deleteUserGroup","data-cy":"deleteUserGroup"},r.createElement("i",{className:"fa-fw fa fa-trash"})))),r.createElement(m.A,{data:a,columns:de,fetchData:oe,totalCount:P,pageCount:_,currentpageIndex:K,currentpageSize:X,loading:b,pagination:!0,rowSelectOp:((0,S.FV)()||(0,S.Xm)())&&{position:"first",selectedRows:O},getRowProps:e=>({className:0==e.values.isVisible&&"row-inactive"})}),r.createElement(u.A,{show:I,onHide:ie},r.createElement(u.A.Header,{closeButton:!0},r.createElement("span",{className:"text-word-break"},"Are you sure you want to delete the ",1===O.current.length?r.createElement(r.Fragment,null,r.createElement("b",null,'"',O.current[0].original.name,'"')," group ?"):r.createElement(r.Fragment,null,"selected",r.createElement("b",null," ",O.current.length)," groups ?"))),r.createElement(u.A.Footer,null,r.createElement(c.A,{variant:"secondary",size:"sm",onClick:ie},"Close"),r.createElement(c.A,{variant:"primary",size:"sm",onClick:()=>{ue()}},"OK"))),r.createElement(u.A,{show:V&&V.showSyncDetails,onHide:ge,size:"xl"},r.createElement(u.A.Header,null,r.createElement(u.A.Title,null,"Sync Source Details")),r.createElement(u.A.Body,null,r.createElement(f.l,{syncDetails:V.syncDteails})),r.createElement(u.A.Footer,null,r.createElement(c.A,{variant:"primary",size:"sm",onClick:ge},"OK"))),r.createElement(u.A,{show:j&&j.showAssociateUserDetails,onHide:Ee,size:"lg"},r.createElement(u.A.Header,{closeButton:!0},r.createElement(u.A.Title,null,r.createElement("div",{className:"d-flex"},"User's List :",r.createElement("div",{className:"ps-2 more-less-width text-truncate",title:null==j?void 0:j.groupName},j.groupName)))),r.createElement(u.A.Body,null,r.createElement(D,{groupID:j.groupID})),r.createElement(u.A.Footer,null,r.createElement(c.A,{variant:"primary",size:"sm",onClick:Ee},"OK")))))}}}]);